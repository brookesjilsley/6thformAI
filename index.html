<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 15">
<meta name=Originator content="Microsoft Word 15">
<link rel=File-List href="index.fld/filelist.xml">
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>James Brookes</o:Author>
  <o:LastAuthor>James Brookes</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>1</o:TotalTime>
  <o:Created>2025-11-23T20:31:00Z</o:Created>
  <o:LastSaved>2025-11-23T20:31:00Z</o:LastSaved>
  <o:Pages>69</o:Pages>
  <o:Words>12443</o:Words>
  <o:Characters>70929</o:Characters>
  <o:Lines>591</o:Lines>
  <o:Paragraphs>166</o:Paragraphs>
  <o:CharactersWithSpaces>83206</o:CharactersWithSpaces>
  <o:Version>16.00</o:Version>
 </o:DocumentProperties>
 <o:OfficeDocumentSettings>
  <o:AllowPNG/>
 </o:OfficeDocumentSettings>
</xml><![endif]-->
<link rel=themeData href="index.fld/themedata.thmx">
<link rel=colorSchemeMapping href="index.fld/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-GB</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:EnableOpenTypeKerning/>
   <w:DontFlipMirrorIndents/>
   <w:OverrideTableStyleHps/>
  </w:Compatibility>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="false"
  DefSemiHidden="false" DefQFormat="false" DefPriority="99"
  LatentStyleCount="376">
  <w:LsdException Locked="false" Priority="0" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 9"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 9"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Normal Indent"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="footnote text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="annotation text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="header"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="footer"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index heading"/>
  <w:LsdException Locked="false" Priority="35" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="table of figures"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="envelope address"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="envelope return"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="footnote reference"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="annotation reference"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="line number"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="page number"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="endnote reference"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="endnote text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="table of authorities"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="macro"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="toa heading"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 5"/>
  <w:LsdException Locked="false" Priority="10" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Closing"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Signature"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="true"
   UnhideWhenUsed="true" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text Indent"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Message Header"/>
  <w:LsdException Locked="false" Priority="11" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Salutation"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Date"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text First Indent"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text First Indent 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Note Heading"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text Indent 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text Indent 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Block Text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Hyperlink"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="FollowedHyperlink"/>
  <w:LsdException Locked="false" Priority="22" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Document Map"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Plain Text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="E-mail Signature"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Top of Form"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Bottom of Form"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Normal (Web)"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Acronym"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Address"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Cite"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Code"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Definition"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Keyboard"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Preformatted"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Sample"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Typewriter"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Variable"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Normal Table"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="annotation subject"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="No List"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Outline List 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Outline List 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Outline List 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Contemporary"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Elegant"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Professional"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Subtle 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Subtle 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Balloon Text"/>
  <w:LsdException Locked="false" Priority="39" Name="Table Grid"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Theme"/>
  <w:LsdException Locked="false" SemiHidden="true" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" SemiHidden="true" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" QFormat="true"
   Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" QFormat="true"
   Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" QFormat="true"
   Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" QFormat="true"
   Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" QFormat="true"
   Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" QFormat="true"
   Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" SemiHidden="true"
   UnhideWhenUsed="true" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="TOC Heading"/>
  <w:LsdException Locked="false" Priority="41" Name="Plain Table 1"/>
  <w:LsdException Locked="false" Priority="42" Name="Plain Table 2"/>
  <w:LsdException Locked="false" Priority="43" Name="Plain Table 3"/>
  <w:LsdException Locked="false" Priority="44" Name="Plain Table 4"/>
  <w:LsdException Locked="false" Priority="45" Name="Plain Table 5"/>
  <w:LsdException Locked="false" Priority="40" Name="Grid Table Light"/>
  <w:LsdException Locked="false" Priority="46" Name="Grid Table 1 Light"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark"/>
  <w:LsdException Locked="false" Priority="51" Name="Grid Table 6 Colorful"/>
  <w:LsdException Locked="false" Priority="52" Name="Grid Table 7 Colorful"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 1"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 1"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 1"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 2"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 2"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 2"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 3"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 3"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 3"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 4"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 4"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 4"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 5"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 5"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 5"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 6"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 6"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 6"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="46" Name="List Table 1 Light"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark"/>
  <w:LsdException Locked="false" Priority="51" Name="List Table 6 Colorful"/>
  <w:LsdException Locked="false" Priority="52" Name="List Table 7 Colorful"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 1"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 1"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 1"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 2"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 2"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 2"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 3"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 3"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 3"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 4"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 4"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 4"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 5"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 5"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 5"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 6"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 6"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 6"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Mention"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Smart Hyperlink"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Hashtag"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Unresolved Mention"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Smart Link"/>
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-536870145 1107305727 0 0 415 0;}
@font-face
	{font-family:Aptos;
	panose-1:2 11 0 4 2 2 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:536871559 3 0 0 415 0;}
@font-face
	{font-family:"Apple Color Emoji";
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 402653184 335544320 0 1 0;}
@font-face
	{font-family:"Segoe UI Symbol";
	panose-1:2 11 5 2 4 2 4 2 2 3;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-2147483165 302055407 262144 0 1 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:Aptos;
	mso-fareast-theme-font:minor-latin;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
h1
	{mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"Heading 1 Char";
	mso-style-next:Normal;
	margin-top:18.0pt;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:20.0pt;
	font-family:"Aptos Display",sans-serif;
	mso-ascii-font-family:"Aptos Display";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"Aptos Display";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;
	font-weight:normal;}
h2
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"Heading 2 Char";
	mso-style-next:Normal;
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:16.0pt;
	font-family:"Aptos Display",sans-serif;
	mso-ascii-font-family:"Aptos Display";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"Aptos Display";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;
	font-weight:normal;}
h3
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"Heading 3 Char";
	mso-style-next:Normal;
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:14.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;
	font-weight:normal;}
h4
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"Heading 4 Char";
	mso-style-next:Normal;
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:2.0pt;
	margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;
	font-weight:normal;
	font-style:italic;}
h5
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"Heading 5 Char";
	mso-style-next:Normal;
	margin-top:4.0pt;
	margin-right:0cm;
	margin-bottom:2.0pt;
	margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:5;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;
	font-weight:normal;}
h6
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"Heading 6 Char";
	mso-style-next:Normal;
	margin-top:2.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:6;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#595959;
	mso-themecolor:text1;
	mso-themetint:166;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;
	font-weight:normal;
	font-style:italic;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"Heading 7 Char";
	mso-style-next:Normal;
	margin-top:2.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:7;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#595959;
	mso-themecolor:text1;
	mso-themetint:166;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"Heading 8 Char";
	mso-style-next:Normal;
	margin:0cm;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:8;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#272727;
	mso-themecolor:text1;
	mso-themetint:216;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;
	font-style:italic;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"Heading 9 Char";
	mso-style-next:Normal;
	margin:0cm;
	line-height:115%;
	mso-pagination:widow-orphan lines-together;
	page-break-after:avoid;
	mso-outline-level:9;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#272727;
	mso-themecolor:text1;
	mso-themetint:216;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-priority:10;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"Title Char";
	mso-style-next:Normal;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	mso-add-space:auto;
	mso-pagination:widow-orphan;
	font-size:28.0pt;
	font-family:"Aptos Display",sans-serif;
	mso-ascii-font-family:"Aptos Display";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"Aptos Display";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	letter-spacing:-.5pt;
	mso-font-kerning:14.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-priority:10;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"Title Char";
	mso-style-next:Normal;
	mso-style-type:export-only;
	margin:0cm;
	mso-add-space:auto;
	mso-pagination:widow-orphan;
	font-size:28.0pt;
	font-family:"Aptos Display",sans-serif;
	mso-ascii-font-family:"Aptos Display";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"Aptos Display";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	letter-spacing:-.5pt;
	mso-font-kerning:14.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-priority:10;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"Title Char";
	mso-style-next:Normal;
	mso-style-type:export-only;
	margin:0cm;
	mso-add-space:auto;
	mso-pagination:widow-orphan;
	font-size:28.0pt;
	font-family:"Aptos Display",sans-serif;
	mso-ascii-font-family:"Aptos Display";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"Aptos Display";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	letter-spacing:-.5pt;
	mso-font-kerning:14.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-priority:10;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"Title Char";
	mso-style-next:Normal;
	mso-style-type:export-only;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:4.0pt;
	margin-left:0cm;
	mso-add-space:auto;
	mso-pagination:widow-orphan;
	font-size:28.0pt;
	font-family:"Aptos Display",sans-serif;
	mso-ascii-font-family:"Aptos Display";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"Aptos Display";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	letter-spacing:-.5pt;
	mso-font-kerning:14.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-style-priority:11;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"Subtitle Char";
	mso-style-next:Normal;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:14.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#595959;
	mso-themecolor:text1;
	mso-themetint:166;
	letter-spacing:.75pt;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-priority:34;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:36.0pt;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:Aptos;
	mso-fareast-theme-font:minor-latin;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{mso-style-priority:34;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-type:export-only;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:Aptos;
	mso-fareast-theme-font:minor-latin;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{mso-style-priority:34;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-type:export-only;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:Aptos;
	mso-fareast-theme-font:minor-latin;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{mso-style-priority:34;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-type:export-only;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:36.0pt;
	mso-add-space:auto;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:Aptos;
	mso-fareast-theme-font:minor-latin;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
p.MsoQuote, li.MsoQuote, div.MsoQuote
	{mso-style-priority:29;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"Quote Char";
	mso-style-next:Normal;
	margin-top:8.0pt;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	text-align:center;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:Aptos;
	mso-fareast-theme-font:minor-latin;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	color:#404040;
	mso-themecolor:text1;
	mso-themetint:191;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;
	font-style:italic;}
p.MsoIntenseQuote, li.MsoIntenseQuote, div.MsoIntenseQuote
	{mso-style-priority:30;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"Intense Quote Char";
	mso-style-next:Normal;
	margin-top:18.0pt;
	margin-right:43.2pt;
	margin-bottom:18.0pt;
	margin-left:43.2pt;
	text-align:center;
	line-height:115%;
	mso-pagination:widow-orphan;
	border:none;
	mso-border-top-alt:solid #0F4761 .5pt;
	mso-border-top-themecolor:accent1;
	mso-border-top-themeshade:191;
	mso-border-bottom-alt:solid #0F4761 .5pt;
	mso-border-bottom-themecolor:accent1;
	mso-border-bottom-themeshade:191;
	padding:0cm;
	mso-padding-alt:10.0pt 0cm 10.0pt 0cm;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:Aptos;
	mso-fareast-theme-font:minor-latin;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;
	font-style:italic;}
span.MsoIntenseEmphasis
	{mso-style-priority:21;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;
	font-style:italic;}
span.MsoIntenseReference
	{mso-style-priority:32;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	font-variant:small-caps;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;
	letter-spacing:.25pt;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 1";
	mso-ansi-font-size:20.0pt;
	mso-bidi-font-size:20.0pt;
	font-family:"Aptos Display",sans-serif;
	mso-ascii-font-family:"Aptos Display";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"Aptos Display";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 2";
	mso-ansi-font-size:16.0pt;
	mso-bidi-font-size:16.0pt;
	font-family:"Aptos Display",sans-serif;
	mso-ascii-font-family:"Aptos Display";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"Aptos Display";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 3";
	mso-ansi-font-size:14.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 4";
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;
	font-style:italic;}
span.Heading5Char
	{mso-style-name:"Heading 5 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 5";
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;}
span.Heading6Char
	{mso-style-name:"Heading 6 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 6";
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#595959;
	mso-themecolor:text1;
	mso-themetint:166;
	font-style:italic;}
span.Heading7Char
	{mso-style-name:"Heading 7 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 7";
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#595959;
	mso-themecolor:text1;
	mso-themetint:166;}
span.Heading8Char
	{mso-style-name:"Heading 8 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 8";
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#272727;
	mso-themecolor:text1;
	mso-themetint:216;
	font-style:italic;}
span.Heading9Char
	{mso-style-name:"Heading 9 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Heading 9";
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#272727;
	mso-themecolor:text1;
	mso-themetint:216;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-priority:10;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:Title;
	mso-ansi-font-size:28.0pt;
	mso-bidi-font-size:28.0pt;
	font-family:"Aptos Display",sans-serif;
	mso-ascii-font-family:"Aptos Display";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"Aptos Display";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	letter-spacing:-.5pt;
	mso-font-kerning:14.0pt;}
span.SubtitleChar
	{mso-style-name:"Subtitle Char";
	mso-style-priority:11;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:Subtitle;
	mso-ansi-font-size:14.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:major-fareast;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	color:#595959;
	mso-themecolor:text1;
	mso-themetint:166;
	letter-spacing:.75pt;}
span.QuoteChar
	{mso-style-name:"Quote Char";
	mso-style-priority:29;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:Quote;
	color:#404040;
	mso-themecolor:text1;
	mso-themetint:191;
	font-style:italic;}
span.IntenseQuoteChar
	{mso-style-name:"Intense Quote Char";
	mso-style-priority:30;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Intense Quote";
	color:#0F4761;
	mso-themecolor:accent1;
	mso-themeshade:191;
	font-style:italic;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:Aptos;
	mso-fareast-theme-font:minor-latin;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-fareast-language:EN-US;}
.MsoPapDefault
	{mso-style-type:export-only;
	margin-bottom:8.0pt;
	line-height:115%;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.WordSection1
	{page:WordSection1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin-top:0cm;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:8.0pt;
	mso-para-margin-left:0cm;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;
	mso-ascii-font-family:Aptos;
	mso-ascii-theme-font:minor-latin;
	mso-hansi-font-family:Aptos;
	mso-hansi-theme-font:minor-latin;
	mso-font-kerning:1.0pt;
	mso-ligatures:standardcontextual;
	mso-fareast-language:EN-US;}
</style>
<![endif]-->
</head>

<body lang=EN-GB style='tab-interval:36.0pt;word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal>&lt;!DOCTYPE html&gt;<o:p></o:p></p>

<p class=MsoNormal>&lt;html lang=&quot;en&quot;&gt;<o:p></o:p></p>

<p class=MsoNormal>&lt;head&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;meta
charset=&quot;UTF-8&quot;&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;meta
name=&quot;viewport&quot; content=&quot;width=device-width,
initial-scale=1.0&quot;&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;title&gt;ABI
6TH FORM: THE AUTHENTICITY PROTOCOL&lt;/title&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;script
src=&quot;https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js&quot;&gt;&lt;/script&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;style&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>@import
url('https://fonts.googleapis.com/css2?family=Press+Start+2P&amp;display=swap'<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>:root</span> {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>--bg-color: <span class=GramE>#101015;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>--ui-bg: #<span
class=GramE>ffffff;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>--ui-border: <span class=GramE>#404040;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>--text-color: <span class=GramE>#000000;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>--accent:
#<span class=GramE>f0db4f;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>--danger:
#<span class=GramE>ff4444;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>--success:
#<span class=GramE>44ff44;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>body {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background-color: <span class=GramE>#050505;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: <span
class=GramE>var(</span>--text-color<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>font-family: 'Press Start 2P', <span class=GramE>cursive;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>margin: <span
class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>display: <span
class=GramE>flex;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>justify-content: <span class=GramE>center;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>align-items: <span class=GramE>center;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>height: <span
class=GramE>100vh;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>overflow: <span
class=GramE>hidden;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>user-select: <span class=GramE>none;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>#game-container {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>position: <span
class=GramE>relative;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>width: <span
class=GramE>800px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>height: <span
class=GramE>600px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background-color: <span class=GramE>var(</span>--bg-color<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>border:
4px solid <span class=GramE>#333;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>box-shadow: 0 0 30px <span class=GramE>rgba(</span>0,255,0,0.1<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>outline: <span
class=GramE>none;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>canvas {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>display: <span
class=GramE>block;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>width: <span
class=GramE>100%;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>height: <span
class=GramE>100%;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>image-rendering: <span class=GramE>pixelated;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>/* --- NEW
EXCITING INTRO SCREEN --- */<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>#intro-screen
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>position: <span
class=GramE>absolute;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>top:0; <span
class=GramE>left:</span>0; width:100%; height:100<span class=GramE>%;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background: <span class=GramE>#000;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>display: <span
class=GramE>flex;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>flex-direction: <span class=GramE>column;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>justify-content: <span class=GramE>center;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>align-items: <span class=GramE>center;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>z-index: <span
class=GramE>100;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>text-align: <span class=GramE>center;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: <span
class=GramE>white;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>overflow: <span
class=GramE>hidden;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>.glitch</span>-title {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>font-size:
<span class=GramE>40px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>position: <span
class=GramE>relative;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: #<span
class=GramE>44ff44;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>text-shadow: 4px 4px <span class=GramE>#000;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>margin-bottom: <span class=GramE>20px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>animation:
glitch 1s <span class=GramE>infinite;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>.glitch</span>-<span class=GramE>title::</span>before<span
class=GramE>, .glitch</span>-<span class=GramE>title::</span>after {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>content:
&quot;ABI 6TH FORM<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>position: <span
class=GramE>absolute;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>top: <span
class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>left: <span
class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>width: <span
class=GramE>100%;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>height: <span
class=GramE>100%;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background: <span class=GramE>#000;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>.glitch</span>-<span class=GramE>title::</span>before {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>left: <span
class=GramE>2px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>text-shadow: -2px 0 #<span class=GramE>ff00c1;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>clip: <span
class=GramE>rect(</span>44px, 450px, 56px, 0<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>animation:
glitch-anim-1 5s infinite linear alternate-<span class=GramE>reverse;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>.glitch</span>-<span class=GramE>title::</span>after {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>left: -<span
class=GramE>2px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>text-shadow: -2px 0 #<span class=GramE>00fff9;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>clip: <span
class=GramE>rect(</span>44px, 450px, 56px, 0<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>animation:
glitch-anim-2 5s infinite linear alternate-<span class=GramE>reverse;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>@keyframes
glitch-anim-1 {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>0% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>30px, 9999px, 10px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>20% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>80px, 9999px, 90px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>40% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>10px, 9999px, 50px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>60% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>40px, 9999px, 20px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>80% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>70px, 9999px, 90px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>100% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>20px, 9999px, 60px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>@keyframes
glitch-anim-2 {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>0% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>10px, 9999px, 30px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>20% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>50px, 9999px, 20px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>40% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>90px, 9999px, 70px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>60% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>20px, 9999px, 40px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>80% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>60px, 9999px, 10px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>100% <span
class=GramE>{ clip</span>: <span class=GramE>rect(</span>80px, 9999px, 90px, 0)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>.subtitle</span> {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>font-size:
<span class=GramE>14px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: #<span
class=GramE>ccc;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>margin-bottom: <span class=GramE>50px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>letter-spacing: <span class=GramE>2px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>.mission</span>-box {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>border:
2px solid #<span class=GramE>44ff44;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>padding: <span
class=GramE>20px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background: <span class=GramE>rgba(</span>0, 50, 0, 0.8<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>margin-bottom: <span class=GramE>40px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>width: <span
class=GramE>60%;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>.press</span>-start {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>font-size:
<span class=GramE>18px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: #<span
class=GramE>f0db4f;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>animation:
blinker 0.8s linear <span class=GramE>infinite;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>cursor: <span
class=GramE>pointer;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>@keyframes
blinker <span class=GramE>{ 50</span>% <span class=GramE>{ opacity</span>: 0<span
class=GramE>; }</span> }<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>#focus-overlay
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>position: <span
class=GramE>absolute;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>top:0; <span
class=GramE>left:</span>0; width:100%; height:100<span class=GramE>%;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background: <span class=GramE>rgba(</span>0,0,0,0.9<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>display: <span
class=GramE>flex;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>justify-content: <span class=GramE>center;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>align-items: <span class=GramE>center;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>z-index: <span
class=GramE>200;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>cursor: <span
class=GramE>pointer;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: #<span
class=GramE>4f4;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>flex-direction: <span class=GramE>column;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>text-align: <span class=GramE>center;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>#dialogue-box
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>position: <span
class=GramE>absolute;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>display: <span
class=GramE>none;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>bottom: <span
class=GramE>10px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>left: <span
class=GramE>10px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>right: <span
class=GramE>10px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>height: <span
class=GramE>120px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>z-index: <span
class=GramE>10;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>padding: <span
class=GramE>15px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>border:
4px double <span class=GramE>#000;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background-color: #<span class=GramE>fff;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>border-radius: <span class=GramE>4px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>line-height: <span class=GramE>1.8;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>font-size:
<span class=GramE>14px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: <span
class=GramE>black;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>#dialogue-name
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: #<span
class=GramE>d00;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>margin-bottom: <span class=GramE>5px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>text-transform: <span class=GramE>uppercase;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>font-size:
<span class=GramE>12px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>#room-name {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>position: <span
class=GramE>absolute;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>top: <span
class=GramE>20px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>left: <span
class=GramE>20px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: <span
class=GramE>white;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background: <span class=GramE>rgba(</span>0,0,0,0.5<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>padding:
5px <span class=GramE>10px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>border:
2px solid <span class=GramE>white;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>display:
none; /* Shown via JS */<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>#scanlines {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>position: <span
class=GramE>absolute;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>top: 0;
left: 0; width: 100%; height: <span class=GramE>100%;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background: linear-<span class=GramE>gradient(</span>to bottom, <span
class=GramE>rgba(</span>255,255,255,0), <span class=GramE>rgba(</span>255,255,255,0)
50%, <span class=GramE>rgba(</span>0,0,0,0.1) 50%, <span class=GramE>rgba(</span>0,0,0,0.1)<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background-size: 100% <span class=GramE>4px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>pointer-events: <span class=GramE>none;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>z-index: <span
class=GramE>999;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>opacity: <span
class=GramE>0.3;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>/* --- JBR
GAMES LOGO --- */<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>.logo</span>-box {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>border:
4px solid #<span class=GramE>fff;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>padding:
15px <span class=GramE>20px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>background: <span class=GramE>#000;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>margin-bottom: <span class=GramE>40px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>box-shadow: 6px 6px 0px <span class=GramE>#444;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>display: <span
class=GramE>flex;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>flex-direction: <span class=GramE>column;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>align-items: <span class=GramE>center;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>transform:
<span class=GramE>scale(</span>1.2<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>.logo</span>-jbr {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>font-size:
<span class=GramE>40px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: #<span
class=GramE>f0db4f;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>text-shadow: 4px 4px 0px #<span class=GramE>d82020;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>line-height: <span class=GramE>1;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>font-weight: <span class=GramE>bold;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>.logo</span>-games {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>font-size:
<span class=GramE>12px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color: #<span
class=GramE>44ff44;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>letter-spacing: <span class=GramE>8px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>margin-top: <span class=GramE>5px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>border-top: 2px solid <span class=GramE>#333;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>padding-top: <span class=GramE>5px;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>width: <span
class=GramE>100%;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>text-align: <span class=GramE>center;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;/style&gt;<o:p></o:p></p>

<p class=MsoNormal>&lt;/head&gt;<o:p></o:p></p>

<p class=MsoNormal>&lt;body&gt;<o:p></o:p></p>

<p class=MsoNormal>&lt;div id=&quot;game-container&quot;
tabindex=&quot;0&quot;&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;canvas
id=&quot;gameCanvas&quot; width=&quot;800&quot;
height=&quot;600&quot;&gt;&lt;/canvas&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
id=&quot;scanlines&quot;&gt;&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
id=&quot;room-name&quot;&gt;COMMON ROOM&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
id=&quot;focus-overlay&quot; onclick=&quot;<span class=GramE>initAudio(</span>);
<span class=GramE>this.style</span>.display='none'; <span class=GramE>document.getElementById</span>('game-container'<span
class=GramE>).focus</span>();&quot;&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
class=&quot;logo-box&quot;&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
class=&quot;logo-jbr&quot;&gt;JBR&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
class=&quot;logo-games&quot;&gt;GAMES&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
class=&quot;blink&quot; style=&quot;<span class=GramE>color:#</span>f0db4f&quot;&gt;Click
to Start&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
id=&quot;intro-screen&quot;&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
class=&quot;glitch-title&quot;&gt;ABI 6TH FORM&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
class=&quot;subtitle&quot;&gt;THE AUTHENTICITY PROTOCOL&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
class=&quot;mission-box&quot;&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;p
style=&quot;<span class=GramE>color:#</span>ff4444;
margin-bottom:10px;&quot;&gt;ALERT: SYSTEM CORRUPTED&lt;/p&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;p
style=&quot;font-size: 10px; line-height: 1.5;&quot;&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>The
Main Glitch has stolen the JCQ <span class=GramE>Guidance.&lt;</span>br&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>Authenticity levels are dropping <span class=GramE>critically.&lt;</span>br&gt;&lt;br&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>MISSION: PURGE THE BUGS. RECOVER THE DATA.<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;/p&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
class=&quot;press-start&quot;&gt;PRESS SPACE TO START&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
id=&quot;dialogue-box&quot;&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
id=&quot;dialogue-name&quot;&gt;System&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
id=&quot;dialogue-text&quot;&gt;...&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;div
style=&quot;font-size: 10px; text-<span class=GramE>align:</span> right;
margin-top: 10px; opacity: 0.7;&quot;&gt;[SPACE]&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal>&lt;/div&gt;<o:p></o:p></p>

<p class=MsoNormal>&lt;script&gt;<o:p></o:p></p>

<p class=MsoNormal>const canvas = <span class=GramE>document.getElementById</span>('gameCanvas'<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>const ctx = <span class=GramE>canvas.getContext</span>('2d'<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>// --- PIXEL ART SPRITE SYSTEM ---<o:p></o:p></p>

<p class=MsoNormal>const PALETTE = {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'.': null,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'x': '#000000',
's': '#ffccaa', 'w': '#ffffff', 'r': '#d82020',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'b': '#2040d8',
'g': '#44aa44', 'y': '#ffee00', 'h': '#663300',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'c': '#888888',
'p': '#aa00aa', 'm': '#00aa00', 'd': '#222222',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'D': '#664400', //
Door Brown<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'T': '#8b4513', //
Table Brown<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'C': '#666666', //
Chair Grey<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'L': '#228b22', //
Plant Green<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'O': '#ff9900<span
class=GramE>'<span style='mso-spacerun:yes'> </span>/</span>/ Orange (Alert)<o:p></o:p></p>

<p class=MsoNormal>};<o:p></o:p></p>

<p class=MsoNormal>const SPRITE_DATA = {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>player: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xbbbbbbx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xbbbbbbbbx....&quot;, <span class=GramE>&quot;.xbbwwwwwwbbx</span>...&quot;,
<span class=GramE>&quot;.xbbwwwwwwbbx</span>...&quot;, <span class=GramE>&quot;.xbbbbbbbbbbx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>grant: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhsxwwxshx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xrrwwrrx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xrrwwwwrrx....&quot;, <span class=GramE>&quot;.xrrwwwwwwrrx</span>...&quot;,
<span class=GramE>&quot;.xrrwwwwwwrrx</span>...&quot;, <span class=GramE>&quot;.xrrrrrrrrrrx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>brookes: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xbbbbbbx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xbbbbbbbbx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhshhhshhx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xggggggx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xggggggggx....&quot;, <span class=GramE>&quot;.xggccccccggx</span>...&quot;,
<span class=GramE>&quot;.xggccccccggx</span>...&quot;, <span class=GramE>&quot;.xggggggggggx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>botwright: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xccccccx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccwwwwccx....&quot;, <span class=GramE>&quot;.xccwwrrwwccx</span>...&quot;,
<span class=GramE>&quot;.xccwwrrwwccx</span>...&quot;, <span class=GramE>&quot;.xccccccccccx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xddddddddx....&quot;, <span class=GramE>&quot;..</span>xddddddddx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>mcmahon: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xyyyyyyx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xyyyyyyyyx....&quot;, <span class=GramE>&quot;..</span>xyssxxssyx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xys.xx.syx....&quot;, <span class=GramE>&quot;..</span>xyssssssyx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xppppppx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xppppppppx....&quot;, <span class=GramE>&quot;.xppwwwwwwppx</span>...&quot;,
<span class=GramE>&quot;.xppwwwwwwppx</span>...&quot;, <span class=GramE>&quot;.xppppppppppx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>oneill: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xbbbbbbx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xbbbbbbbbx....&quot;, <span class=GramE>&quot;.xbbwwwwwwbbx</span>...&quot;,
<span class=GramE>&quot;.xbbwwyywwbbx</span>...&quot;, <span class=GramE>&quot;.xbbbbbbbbbbx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>oneill_strict: [
// Strict Mrs O'Neill - red outfit<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xrrrrrrx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xrrrrrrrrx....&quot;, <span class=GramE>&quot;.xrrwwwwwwrrx</span>...&quot;,
<span class=GramE>&quot;.xrrwwwwwwrrx</span>...&quot;, <span class=GramE>&quot;.xrrrrrrrrrrx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>julie: [ // Apron<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xwwwwwwx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xwwwwwwwwx....&quot;, <span class=GramE>&quot;.xwwwwwwwwwwx</span>...&quot;,
<span class=GramE>&quot;.xwwwwwwwwwwx</span>...&quot;, <span class=GramE>&quot;.xwwwwwwwwwwx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>deacon: [ // Black
suit, clerical collar<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xddddddx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xddddddddx....&quot;, <span class=GramE>&quot;.xddddwwddddx</span>...&quot;,
<span class=GramE>&quot;.xddddwwddddx</span>...&quot;, <span class=GramE>&quot;.xddddddddddx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xddddddddx....&quot;, <span class=GramE>&quot;..</span>xddddddddx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>jones: [ //
History Teacher (Mr Jones) - Tweed<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xTTTTTTx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xTTTTTTTTx....&quot;, <span class=GramE>&quot;.xTTTTTTTTTTx</span>...&quot;,
<span class=GramE>&quot;.xTTwwwwwwTTx</span>...&quot;, <span class=GramE>&quot;.xTTTTTTTTTTx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>russell: [ //
Science Teacher (Miss Russell) - Lab Coat<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xwwwwwwx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xwwwwwwwwx....&quot;, <span class=GramE>&quot;.xwwwwwwwwwwx</span>...&quot;,
<span class=GramE>&quot;.xwwbbwwbbwwx</span>...&quot;, <span class=GramE>&quot;.xwwwwwwwwwwx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>mckeown: [ //
English Teacher (Mrs McKeown) - Cardigan<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhsxwwxshx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xppppppx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xppppppppx....&quot;, <span class=GramE>&quot;.xppwwwwwwppx</span>...&quot;,
<span class=GramE>&quot;.xppwwwwwwppx</span>...&quot;, <span class=GramE>&quot;.xppppppppppx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>clinton: [ // Head
Teacher (Mr Clinton) - Dark formal suit<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xddddddx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xddddddddx....&quot;, <span class=GramE>&quot;.xddddddddddx</span>...&quot;,
<span class=GramE>&quot;.xddwwwwwdddx</span>...&quot;, <span class=GramE>&quot;.xddddddddddx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xddddddddx....&quot;, <span class=GramE>&quot;..</span>xddddddddx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>student: [ //
Generic Student<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....xxxxxx</span>......&quot;, &quot;...xhhhhhhx<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>xhhhhhhhhx....&quot;, <span class=GramE>&quot;..</span>xhssxxsshx....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xhs.xx.shx....&quot;, <span class=GramE>&quot;..</span>xhsssssshx....&quot;,
&quot;<span class=GramE>....xxxxxx</span>......&quot;, &quot;...xbbbbbbx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xbbbbbbbbx....&quot;, <span class=GramE>&quot;.xbbwwwwwwbbx</span>...&quot;,
<span class=GramE>&quot;.xbbwwwwwwbbx</span>...&quot;, <span class=GramE>&quot;.xbbbbbbbbbbx</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xccccccccx....&quot;, <span class=GramE>&quot;..</span>xccccccccx....&quot;,
&quot;...xx<span class=GramE>....xx.....</span>&quot;, &quot;...xx<span
class=GramE>....xx.....</span>&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>glitch: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....mmmmmm</span>......&quot;, &quot;...mm.mm.mm<span class=GramE>.....</span>&quot;,
<span class=GramE>&quot;..</span>mmmmmmmmmm....&quot;, <span class=GramE>&quot;..</span>m.m.mm.m.m....&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>mmmmmmmmmm....&quot;, <span class=GramE>&quot;..</span>m.mmmmmm.m....&quot;,
&quot;<span class=GramE>....mmmmmm</span>......&quot;, &quot;...mxmxmxmx<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>mxmxmxmxmx....&quot;, <span class=GramE>&quot;.xmxmxmxmxmxm</span>...&quot;,
<span class=GramE>&quot;.mxmxmxmxmxmx</span>...&quot;, <span class=GramE>&quot;.xmxmxmxmxmxm</span>...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..</span>xmxmxmxmx<span class=GramE>.....</span>&quot;, <span
class=GramE>&quot;..</span>mxmxmxmxm<span class=GramE>.....</span>&quot;,
&quot;...m.<span class=GramE>.....</span>m.....&quot;, &quot;...m.<span
class=GramE>.....</span>m.....&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>bug: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;................&quot;, &quot;................&quot;,
&quot;................&quot;, &quot;................&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;......mm........&quot;, &quot;<span class=GramE>....mmmmmm</span>......&quot;,
&quot;...mmxmmxmm<span class=GramE>.....</span>&quot;, &quot;...mmmmmmmm<span
class=GramE>.....</span>&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....mmmmmm</span>......&quot;, &quot;<span class=GramE>....m.</span>...m.<span
class=GramE>.....</span>&quot;, &quot;<span class=GramE>....m.</span>...m.<span
class=GramE>.....</span>&quot;, &quot;................&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;................&quot;, &quot;................&quot;,
&quot;................&quot;, &quot;................&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>door: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>xxxxx</span>......xxxxx&quot;, &quot;xDDDx......xDDDx&quot;,
&quot;xDDDx......xDDDx&quot;, &quot;xDDDx......xDDDx&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;xDDDx......xDDDx&quot;, &quot;xDDDx......xDDDx&quot;,
&quot;xDDDx......xDDDx&quot;, &quot;xDDDx......xDDDx&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;xDDDx......xDDDx&quot;, &quot;xDDDx......xDDDx&quot;,
&quot;xDDDx......xDDDx&quot;, &quot;xDDDx......xDDDx&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;xDDDx......xDDDx&quot;, &quot;xDDDx......xDDDx&quot;,
&quot;xDDDx......xDDDx&quot;, &quot;xDDDx......xDDDx&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>chair: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;................&quot;, &quot;................&quot;,
&quot;................&quot;, &quot;................&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;......xxxx......&quot;, &quot;......xCCx......&quot;,
&quot;......xCCx......&quot;, &quot;......xCCx......&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;......xCCx......&quot;, &quot;<span class=GramE>....xxxCCxxx</span>....&quot;,
&quot;...xCCCCCCCCx...&quot;, &quot;...xCCCCCCCCx...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;...xCCCCCCCCx...&quot;, &quot;...xxxxxxxxxx...&quot;,
&quot;...x.x....x.x...&quot;, &quot;...x.x....x.x...&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>table: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;................&quot;, &quot;................&quot;,
&quot;................&quot;, &quot;................&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;................&quot;, &quot;................&quot;,
&quot;................&quot;, &quot;................&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;.xxxxxxxxxxxxxx</span>.&quot;, <span class=GramE>&quot;.xTTTTTTTTTTTTx</span>.&quot;,
<span class=GramE>&quot;.xTTTTTTTTTTTTx</span>.&quot;, <span class=GramE>&quot;.xTTTTTTTTTTTTx</span>.&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;.xTTTTTTTTTTTTx</span>.&quot;, <span class=GramE>&quot;.xxxxxxxxxxxxxx</span>.&quot;,
<span class=GramE>&quot;.xx</span>..........xx.&quot;, <span class=GramE>&quot;.xx</span>..........xx.&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>plant: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;................&quot;, &quot;......LLLL......&quot;, &quot;<span
class=GramE>....LLLLLLLL</span>....&quot;, &quot;...LLLLLLLLLL...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>&quot;..LLLLLLLLLLLL..</span>&quot;, <span class=GramE>&quot;..LLLLLLLLLLLL..</span>&quot;,
<span class=GramE>&quot;..LLLLLLLLLLLL..</span>&quot;,
&quot;...LLLLLLLLLL...&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>&quot;<span
class=GramE>....LLLLLLLL</span>....&quot;, &quot;......LLLL......&quot;,
&quot;.......xx.......&quot;, &quot;......xDDx......&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;......xDDx......&quot;, &quot;......xDDx......&quot;,
&quot;......xDDx......&quot;, &quot;......xxxx......&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>alert: [ //
&quot;!&quot; Icon<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;................&quot;, &quot;.......OO.......&quot;,
&quot;......OOOO......&quot;, &quot;......OOOO......&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;......OOOO......&quot;, &quot;......OOOO......&quot;,
&quot;.......OO.......&quot;, &quot;.......OO.......&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;.......OO.......&quot;, &quot;................&quot;,
&quot;.......OO.......&quot;, &quot;......OOOO......&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;.......OO.......&quot;, &quot;................&quot;,
&quot;................&quot;, &quot;................&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>]<o:p></o:p></p>

<p class=MsoNormal>};<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>drawSprite(</span>ctx, key, x, y,
size, facingRight = true, bob = 0, opacity = 1.0) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const data =
SPRITE_<span class=GramE>DATA[</span>key<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if <span
class=GramE>(!data</span>) <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const pixelSize =
size / <span class=GramE>16;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const bobOffset =
Math.sin(bob) * <span class=GramE>2;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.globalAlpha</span>
= <span class=GramE>opacity;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>for (let r = 0; r
&lt; 16; r++) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>for (let c =
0; c &lt; 16; c++) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let char =
data[r][c<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>char !</span>== '.') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = <span class=GramE>PALETTE[</span>char<span
class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let
drawX = <span class=GramE>facingRight ?</span> x + (15 - c) * <span
class=GramE>pixelSize :</span> x + c * <span class=GramE>pixelSize;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let
drawY = y + r * pixelSize + <span class=GramE>bobOffset;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillRect</span>(drawX, drawY, pixelSize, pixelSize<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.globalAlpha</span>
= <span class=GramE>1.0;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>wrapText(</span>context, text, x,
y, maxWidth, lineHeight) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if <span
class=GramE>(!text</span>) <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const words = <span
class=GramE>text.split</span>(' '<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let line = '<span
class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>for(</span>let
n = 0; n &lt; <span class=GramE>words.length</span>; n++) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const testLine
= line + words[n] + ' <span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const metrics
= <span class=GramE>context.measureText</span>(testLine<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>metrics.width</span> &gt; maxWidth &amp;&amp; n &gt; 0) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>context.fillText</span>(line, x, y<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>line =
words[n] + ' <span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>y += <span
class=GramE>lineHeight;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else line = <span
class=GramE>testLine;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>context.fillText</span>(line,
x, y<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>// --- AUDIO SYSTEM ---<o:p></o:p></p>

<p class=MsoNormal>let audioCtx, bgmOscillators = [], isMuted = false,
currentSong = 'NONE<span class=GramE>';</span> <o:p></o:p></p>

<p class=MsoNormal>let battleInit = false, battleLead, battleBass, battleKick,
battleNoise, battleLeadSeq, battleBassSeq, <span class=GramE>battleDrumSeq;</span><o:p></o:p></p>

<p class=MsoNormal>// Town music<o:p></o:p></p>

<p class=MsoNormal>let townInit = false, townSynth, townBass, townMelodySeq, <span
class=GramE>townBassSeq;</span><o:p></o:p></p>

<p class=MsoNormal>// Chapel music<o:p></o:p></p>

<p class=MsoNormal>let chapelInit = false, chapelSynth, <span class=GramE>chapelMelodySeq;</span><o:p></o:p></p>

<p class=MsoNormal>// Victory music<o:p></o:p></p>

<p class=MsoNormal>let victoryMusicInit = false, victoryMusicSynth,
victoryMusicBass, victoryMelodySeq, <span class=GramE>victoryBassSeq;</span><o:p></o:p></p>

<p class=MsoNormal>// NEW: ENEMY DOWN SFX<o:p></o:p></p>

<p class=MsoNormal>let enemyDownInit = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal>let downNoise, <span class=GramE>downHit;</span><o:p></o:p></p>

<p class=MsoNormal>// NEW: ENCOUNTER ALARM SFX<o:p></o:p></p>

<p class=MsoNormal>let encounterInit = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal>let <span class=GramE>encounterSynth;</span><o:p></o:p></p>

<p class=MsoNormal>// NEW: VICTORY FANFARE<o:p></o:p></p>

<p class=MsoNormal>let victoryInit = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal>let <span class=GramE>victorySynth;</span><o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>initVictoryFanfare(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (victoryInit) <span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>victorySynth = new
Tone.Synth({<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>oscillator: <span
class=GramE>{ type</span>: &quot;triangle<span class=GramE>&quot; }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>envelope: <span
class=GramE>{ attack</span>: 0.01, decay: 0.1, sustain: 0.3, release: <span
class=GramE>0.2 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<span
class=GramE>).toDestination</span>(<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>victorySynth.volume.value = <span class=GramE>-8;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>victoryInit = <span
class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>playVictoryFanfare(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>Tone.context.state !=</span>= 'running') <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>initVictoryFanfare();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const now = <span
class=GramE>Tone.now();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Upbeat victory
jingle: da da da daaaa!<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const melody = [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;C5&quot;, time: 0, duration: &quot;8n<span
class=GramE>&quot; }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;E5&quot;, time: 0.15, duration: &quot;8n<span
class=GramE>&quot; }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;G5&quot;, time: 0.3, duration: &quot;8n<span
class=GramE>&quot; }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;C6&quot;, time: 0.45, duration: &quot;4n<span
class=GramE>&quot; }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Extra
flourish<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;G5&quot;, time: 0.75, duration: &quot;16n<span
class=GramE>&quot; }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;C6&quot;, time: 0.85, duration: &quot;4n<span
class=GramE>&quot; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>];<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>melody.forEach</span>(({note,
time, duration}) =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>victorySynth.triggerAttackRelease(note, duration, now + time<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>});<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>initEncounterSfx(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (encounterInit) <span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>encounterSynth = new
Tone.Synth({<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>oscillator: <span
class=GramE>{ type</span>: &quot;square<span class=GramE>&quot; }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>envelope: <span
class=GramE>{ attack</span>: 0.001, decay: 0.1, sustain: 0.3, release: <span
class=GramE>0.1 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<span class=GramE>).toDestination</span>(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>encounterSynth.volume.value = <span class=GramE>-8;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>encounterInit = <span
class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>playEncounterSfx(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>Tone.context.state !=</span>= 'running') <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>initEncounterSfx();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const now = <span
class=GramE>Tone.now();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Siren-style
alarm: alternating high and low pitches<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const siren = [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;E5&quot;, time: <span class=GramE>0 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;C5&quot;, time: <span class=GramE>0.15 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;E5&quot;, time: <span class=GramE>0.3 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;C5&quot;, time: <span class=GramE>0.45 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;E5&quot;, time: <span class=GramE>0.6 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;C5&quot;, time: <span class=GramE>0.75 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;E5&quot;, time: <span class=GramE>0.9 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;C5&quot;, time: <span class=GramE>1.05 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Dramatic rise
at the end<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;G5&quot;, time: <span class=GramE>1.2 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ note</span>: &quot;C6&quot;, time: <span class=GramE>1.35 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>];<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>siren.forEach</span>(({note,
time}) =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>encounterSynth.triggerAttackRelease(note, &quot;8n&quot;, now + time<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>});<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>initEnemyDownSfx(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (enemyDownInit) <span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>downNoise = new
Tone.NoiseSynth<span class=GramE>({ noise</span>: <span class=GramE>{ type</span>:
&quot;white<span class=GramE>&quot; }</span>, envelope: <span class=GramE>{
attack</span>: 0.001, decay: 0.45, sustain: <span class=GramE>0 }</span> }<span
class=GramE>).toDestination</span>(); downNoise.volume.value = <span
class=GramE>-8;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>downHit = new
Tone.Synth<span class=GramE>({ oscillator</span>: <span class=GramE>{ type</span>:
&quot;square<span class=GramE>&quot; }</span>, envelope: <span class=GramE>{
attack</span>: 0.001, decay: 0.2, sustain: 0, release: 0.<span class=GramE>1 }</span>
}<span class=GramE>).toDestination</span>(); downHit.volume.value = <span
class=GramE>-6;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>enemyDownInit = <span
class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>playEnemyDownSfx(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>Tone.context.state !=</span>= 'running') <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>initEnemyDownSfx();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const now = <span
class=GramE>Tone.now();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>downNoise.triggerAttackRelease(&quot;4n&quot;, now<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const fallNotes =
[&quot;C3&quot;, &quot;G2&quot;, &quot;C2&quot;<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>fallNotes.forEach((n, i) =&gt; <span class=GramE>{
downHit.triggerAttackRelease</span>(n, &quot;16n&quot;, now + 0.15 + i*0.08)<span
class=GramE>; });</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>downHit.triggerAttackRelease(&quot;C1&quot;, &quot;8n&quot;, now + 0.45<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>async function <span class=GramE>initAudio(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if <span
class=GramE>(!audioCtx</span>) audioCtx = new (<span class=GramE>window.AudioContext</span>
|| <span class=GramE>window.webkitAudioContext)();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>await Tone.start(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>playMusic('ROAM'<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>initTownMusic(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (townInit) <span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Upbeat Town Theme<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>townSynth = new
Tone.Synth({ <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>oscillator: <span
class=GramE>{ type</span>: &quot;triangle<span class=GramE>&quot; }</span>, <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>envelope: <span
class=GramE>{ attack</span>: 0.02, decay: 0.1, sustain: 0.3, release: <span
class=GramE>0.5 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<span class=GramE>).toDestination</span>(<span
class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>townSynth.volume.value = <span class=GramE>-10;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>townBass = new
Tone.Synth({ <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>oscillator: <span
class=GramE>{ type</span>: &quot;square<span class=GramE>&quot; }</span>, <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>envelope: <span
class=GramE>{ attack</span>: 0.05, decay: 0.2, sustain: 0.5, release: <span
class=GramE>0.5 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<span class=GramE>).toDestination</span>(<span
class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>townBass.volume.value = <span class=GramE>-8;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const melodyNotes =
[&quot;C5&quot;, null, &quot;E5&quot;, &quot;G5&quot;, &quot;A5&quot;,
&quot;G5&quot;, &quot;E5&quot;, &quot;C5&quot;, &quot;D5&quot;, null,
&quot;F5&quot;, &quot;A5&quot;, &quot;G5&quot;, &quot;F5&quot;, &quot;D5&quot;,
&quot;B4&quot;<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const bassNotes =
[&quot;C3&quot;, null, &quot;C3&quot;, null, &quot;F3&quot;, null,
&quot;F3&quot;, null, &quot;G3&quot;, null, &quot;G3&quot;, null,
&quot;C3&quot;, null, &quot;C3&quot;, null<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>townMelodySeq = new
Tone.Sequence((t, n) =&gt; n &amp;&amp; townSynth.triggerAttackRelease(n,
&quot;8n&quot;, t), melodyNotes, &quot;8n&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>townBassSeq = new
Tone.Sequence((t, n) =&gt; n &amp;&amp; townBass.triggerAttackRelease(n,
&quot;8n&quot;, t), bassNotes, &quot;4n&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>townMelodySeq.loop =
<span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>townBassSeq.loop = <span
class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>townInit = <span
class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>initChapelMusic(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (chapelInit) <span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>chapelSynth = new
Tone.PolySynth(Tone.Synth, {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>oscillator: <span
class=GramE>{ type</span>: &quot;sine<span class=GramE>&quot; }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>envelope: <span
class=GramE>{ attack</span>: 0.5, decay: 1, sustain: 0.8, release: <span
class=GramE>1 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<span
class=GramE>).toDestination</span>(<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>chapelSynth.volume.value = <span class=GramE>-12;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const chords = [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[&quot;C4&quot;, &quot;E4&quot;, &quot;G4&quot;], null, [&quot;F4&quot;,
&quot;A4&quot;, &quot;C5&quot;], null,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[&quot;G4&quot;, &quot;B4&quot;, &quot;D5&quot;], null, [&quot;C4&quot;,
&quot;E4&quot;, &quot;G4&quot;], null<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>];<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>chapelMelodySeq =
new Tone.Sequence((t, notes) =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (notes)
chapelSynth.triggerAttackRelease(notes, &quot;2n&quot;, t<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}, chords,
&quot;2n&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>chapelMelodySeq.loop = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>chapelInit = <span
class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>initVictoryMusic(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(victoryMusicInit) <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Upbeat victory
theme<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>victoryMusicSynth
= new Tone.Synth({<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>oscillator: <span
class=GramE>{ type</span>: &quot;triangle<span class=GramE>&quot; }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>envelope: <span
class=GramE>{ attack</span>: 0.01, decay: 0.1, sustain: 0.4, release: <span
class=GramE>0.3 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<span
class=GramE>).toDestination</span>(<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>victoryMusicSynth.volume.value = <span class=GramE>-10;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>victoryMusicBass =
new Tone.Synth({<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>oscillator: <span
class=GramE>{ type</span>: &quot;square<span class=GramE>&quot; }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>envelope: <span
class=GramE>{ attack</span>: 0.05, decay: 0.2, sustain: 0.5, release: <span
class=GramE>0.5 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<span
class=GramE>).toDestination</span>(<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>victoryMusicBass.volume.value = <span class=GramE>-8;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Celebratory
melody<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const melodyNotes
= [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;C5&quot;, &quot;E5&quot;, &quot;G5&quot;, &quot;C6&quot;,
&quot;G5&quot;, &quot;E5&quot;, &quot;C5&quot;, &quot;E5&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;D5&quot;, &quot;F5&quot;, &quot;A5&quot;, &quot;D6&quot;,
&quot;A5&quot;, &quot;F5&quot;, &quot;D5&quot;, &quot;F5&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;E5&quot;, &quot;G5&quot;, &quot;C6&quot;, &quot;E6&quot;,
&quot;C6&quot;, &quot;G5&quot;, &quot;E5&quot;, &quot;G5&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;C5&quot;, &quot;E5&quot;, &quot;G5&quot;, &quot;C6&quot;, null,
null, null, null<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>];<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const bassNotes =
[<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;C3&quot;, &quot;C3&quot;, &quot;C3&quot;, &quot;C3&quot;,
&quot;F3&quot;, &quot;F3&quot;, &quot;F3&quot;, &quot;F3&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;G3&quot;, &quot;G3&quot;, &quot;G3&quot;, &quot;G3&quot;,
&quot;C3&quot;, &quot;C3&quot;, &quot;C3&quot;, &quot;C3&quot;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>];<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>victoryMelodySeq =
new Tone.Sequence((t, n) =&gt; n &amp;&amp;
victoryMusicSynth.triggerAttackRelease(n, &quot;8n&quot;, t), melodyNotes,
&quot;8n&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>victoryBassSeq =
new Tone.Sequence((t, n) =&gt; n &amp;&amp;
victoryMusicBass.triggerAttackRelease(n, &quot;8n&quot;, t), bassNotes,
&quot;4n&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>victoryMelodySeq.loop = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>victoryBassSeq.loop = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>victoryMusicInit =
<span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>initBattleMusic(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleInit) <span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleLead = new
Tone.Synth<span class=GramE>({ oscillator</span>: <span class=GramE>{ type</span>:
&quot;square<span class=GramE>&quot; }</span>, envelope: <span class=GramE>{
attack</span>: 0.01, decay: 0.1, sustain: 0.3, release: 0.<span class=GramE>2
}}).toDestination</span>(); battleLead.volume.value = <span class=GramE>-10;</span>
<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleBass = new
Tone.Synth<span class=GramE>({ oscillator</span>: <span class=GramE>{ type</span>:
&quot;square<span class=GramE>&quot; }</span>, envelope: <span class=GramE>{
attack</span>: 0.01, decay: 0.1, sustain: 0.4, release: 0.<span class=GramE>2
}}).toDestination</span>(); battleBass.volume.value = <span class=GramE>-8;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleKick = new
Tone.MembraneSynth(<span class=GramE>).toDestination</span>();
battleKick.volume.value = <span class=GramE>-6;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleNoise = new
Tone.NoiseSynth<span class=GramE>({ noise</span>: <span class=GramE>{ type</span>:
&quot;white<span class=GramE>&quot; }</span>, envelope: <span class=GramE>{
attack</span>: 0.001, decay: 0.12, sustain: <span class=GramE>0
}}).toDestination</span>(); battleNoise.volume.value = <span class=GramE>-12;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const bassNotes =
[&quot;C2&quot;, &quot;C2&quot;, &quot;C2&quot;, &quot;C2&quot;,
&quot;Ab1&quot;, &quot;Ab1&quot;, &quot;Ab1&quot;, &quot;Ab1&quot;,
&quot;Bb1&quot;, &quot;Bb1&quot;, &quot;Bb1&quot;, &quot;Bb1&quot;,
&quot;G1&quot;, &quot;G1&quot;, &quot;G1&quot;, &quot;G1&quot;<span
class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleBassSeq = new
Tone.Sequence((t, n) =&gt; n &amp;&amp; battleBass.triggerAttackRelease(n,
&quot;8n&quot;, t), bassNotes, &quot;8n&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const leadA =
[&quot;C5&quot;, null, &quot;Eb5&quot;, null, &quot;G5&quot;, null,
&quot;F5&quot;, null, &quot;Eb5&quot;, null, &quot;D5&quot;, null,
&quot;C5&quot;, null, null, null<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const leadB =
[&quot;G5&quot;, null, &quot;F5&quot;, null, &quot;Eb5&quot;, null,
&quot;C5&quot;, null, &quot;Bb4&quot;, null, &quot;C5&quot;, null,
&quot;D5&quot;, null, null, null<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleLeadSeq = new
Tone.Sequence((t, n) =&gt; n &amp;&amp; battleLead.triggerAttackRelease(n,
&quot;16n&quot;, t), [...<span class=GramE>leadA,...leadA,...leadB,...</span>leadA],
&quot;16n&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const drum =
[&quot;K&quot;, null, null, null, &quot;K&quot;, null, null, null,
&quot;K&quot;, null, null, null, &quot;K&quot;, null, null, null<span
class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleDrumSeq = new
Tone.Sequence((t, h) =&gt; <span class=GramE>{ if</span> (h === &quot;K&quot;)
battleKick.triggerAttackRelease(&quot;C1&quot;, &quot;16n&quot;, t)<span
class=GramE>; }</span>, drum, &quot;16n&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleBassSeq.loop =
<span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleLeadSeq.loop =
<span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleDrumSeq.loop =
<span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleInit = <span
class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>stopAllMusic(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// --- ROBUST
CLEANUP ---<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Instead of just
stopping sequences, we dispose them and the synths.<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// This guarantees
a &quot;fresh start&quot; every time a track loads, preventing<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// the RangeError
(scheduling in past) and timing issues.<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// 1. Battle Music
Cleanup<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleBassSeq)
<span class=GramE>{ battleBassSeq.dispose</span>(); battleBassSeq = null<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleLeadSeq)
<span class=GramE>{ battleLeadSeq.dispose</span>(); battleLeadSeq = null<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleDrumSeq)
<span class=GramE>{ battleDrumSeq.dispose</span>(); battleDrumSeq = null<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleLead) <span
class=GramE>{ battleLead.dispose</span>(); battleLead = null<span class=GramE>;
}</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleBass) <span
class=GramE>{ battleBass.dispose</span>(); battleBass = null<span class=GramE>;
}</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleKick) <span
class=GramE>{ battleKick.dispose</span>(); battleKick = null<span class=GramE>;
}</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleNoise) <span
class=GramE>{ battleNoise.dispose</span>(); battleNoise = null<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleInit = <span
class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// 2. Town Music
Cleanup<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (townMelodySeq)
<span class=GramE>{ townMelodySeq.dispose</span>(); townMelodySeq = null<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (townBassSeq) <span
class=GramE>{ townBassSeq.dispose</span>(); townBassSeq = null<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (townSynth) <span
class=GramE>{ townSynth.dispose</span>(); townSynth = null<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (townBass) <span
class=GramE>{ townBass.dispose</span>(); townBass = null<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>townInit = <span
class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// 3. Chapel Music
Cleanup<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(chapelMelodySeq) <span class=GramE>{ chapelMelodySeq.dispose</span>();
chapelMelodySeq = null<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (chapelSynth) <span
class=GramE>{ chapelSynth.dispose</span>(); chapelSynth = null<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>chapelInit = <span
class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// 4. Victory
Music Cleanup<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(victoryMelodySeq) <span class=GramE>{ victoryMelodySeq.dispose</span>();
victoryMelodySeq = null<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(victoryBassSeq) <span class=GramE>{ victoryBassSeq.dispose</span>();
victoryBassSeq = null<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(victoryMusicSynth) <span class=GramE>{ victoryMusicSynth.dispose</span>();
victoryMusicSynth = null<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(victoryMusicBass) <span class=GramE>{ victoryMusicBass.dispose</span>();
victoryMusicBass = null<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>victoryMusicInit =
<span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// 5. Reset
Transport<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>try {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>Tone.Transport.stop</span>(<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>Tone.Transport.cancel</span>(); // Clear all scheduled events<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>Tone.Transport.position</span> = 0; // Reset timeline<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} catch(e) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>console.log(</span>&quot;Error stopping transport:&quot;, e<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>currentSong =
'NONE<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>async function <span class=GramE>startBattleMusic(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>Tone.context.state !=</span>= 'running') await Tone.start(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>Tone.Transport.bpm.value = <span class=GramE>150;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>initBattleMusic(</span>);
// Will recreate synths/sequences because init flag was reset<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleBassSeq.start(0); battleLeadSeq.start(0); battleDrumSeq.start(0<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>Tone.Transport.start</span>(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>async function <span class=GramE>startTownMusic(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>Tone.context.state !=</span>= 'running') await Tone.start(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>Tone.Transport.bpm.value = <span class=GramE>120;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>initTownMusic(</span>);
// Will recreate<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>townMelodySeq.start(0<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>townBassSeq.start(0<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>Tone.Transport.start</span>(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>async function <span class=GramE>startChapelMusic(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>Tone.context.state !=</span>= 'running') await Tone.start(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>Tone.Transport.bpm.value = <span class=GramE>80;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>initChapelMusic(</span>);
// Will recreate<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>chapelMelodySeq.start(0<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>Tone.Transport.start</span>(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>async function <span class=GramE>startVictoryMusic(</span>)
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>Tone.context.state !=</span>= 'running') await Tone.start(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>Tone.Transport.bpm.value = <span class=GramE>140;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>initVictoryMusic(</span>);
// Will recreate<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>victoryMelodySeq.start(0<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>victoryBassSeq.start(0<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>Tone.Transport.start</span>(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function playMusic(track) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Don't restart
if already playing this track<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentSong
=== track) <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>stopAllMusic();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>currentSong = <span
class=GramE>track;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (track ===
'BATTLE') { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>startBattleMusic();</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if (track
=== 'ROAM') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>startTownMusic();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if (track
=== 'CHAPEL') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>startChapelMusic();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if (track
=== 'WIN') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>startVictoryMusic();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function playSound(type) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (isMuted) <span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>if(</span>Tone
&amp;&amp; <span class=GramE>Tone.context.state</span> === 'running') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const synth =
new Tone.Synth(<span class=GramE>).toDestination</span>(<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const noise =
new Tone.NoiseSynth(<span class=GramE>).toDestination</span>(<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (type ===
'SELECT') <span class=GramE>synth.triggerAttackRelease</span>(&quot;C6&quot;,
&quot;32n&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (type ===
'CORRECT') <span class=GramE>synth.triggerAttackRelease</span>(&quot;E6&quot;,
&quot;16n&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (type ===
'WRONG') <span class=GramE>{ noise</span>.<span class=GramE>noise.type</span> =
'pink'; <span class=GramE>noise.triggerAttackRelease</span>(&quot;8n&quot;)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (type ===
'HIT') <span class=GramE>{ noise</span>.<span class=GramE>noise.type</span> =
'white'; <span class=GramE>noise.triggerAttackRelease</span>(&quot;16n&quot;)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (type ===
'ALERT') <span class=GramE>synth.triggerAttackRelease</span>(&quot;C7&quot;,
&quot;32n&quot;); // High ping for alert<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>// --- GAME DATA ---<o:p></o:p></p>

<p class=MsoNormal>const COLORS = { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>floor: '#222',
wall: '#444', <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>mediaFloor:
'#203020', libraryFloor: '#202040', examFloor: '#302020' <o:p></o:p></p>

<p class=MsoNormal>};<o:p></o:p></p>

<p class=MsoNormal>const QUIZ_DATA = [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;1. According to JCQ, what must a school's malpractice policy
include?&quot;, options: [&quot;Instructions for improving AI writing
quality&quot;, &quot;Rules for AI use in assessments&quot;, &quot;A list of AI
tools teachers recommend&quot;], correct: <span class=GramE>1 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;2. What are teachers responsible for confirming?&quot;,
options: [&quot;That AI tools have been used efficiently&quot;, &quot;<span
class=GramE>That students</span> enjoyed the task&quot;, &quot;The authenticity
of each student's work&quot;], correct: <span class=GramE>2 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;3. What must students do if they use AI in permitted
coursework?&quot;, options: [&quot;Paraphrase the AI output&quot;,
&quot;Reference the AI tool clearly&quot;, &quot;Email the awarding
body&quot;], correct: <span class=GramE>1 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;4. When can students earn marks for content produced solely by
AI?&quot;, options: [&quot;Only if they reference it correctly&quot;,
&quot;Only if the teacher supervises the AI use&quot;, &quot;NeverAI-generated
content cannot earn marks&quot;], correct: <span class=GramE>2 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;5. What is AI misuse according to the JCQ guidance?&quot;,
options: [&quot;Using AI to check your spelling&quot;, &quot;Using AI to
generate ideas only&quot;, &quot;Taking AI-produced work and presenting it as
your own&quot;], correct: <span class=GramE>2 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;6. What should teachers compare work against if they suspect AI
misuse?&quot;, options: [&quot;The student's favourite writing style&quot;,
&quot;Previous work for differences in tone, quality, and formatting&quot;,
&quot;The student's mock exam results only&quot;], correct: <span class=GramE>1
}</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;7. What should students do before signing the declaration on
coursework?&quot;, options: [&quot;Remove all references to AI&quot;,
&quot;Double-check all AI usage has been referenced&quot;, &quot;Submit
anonymously&quot;], correct: <span class=GramE>1 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;8. If a student misuses AI, what is a possible
consequence?&quot;, options: [&quot;A warning with no grade impact&quot;,
&quot;Extra time on their next assessment&quot;, &quot;They may lose marks or
be disqualified&quot;], correct: <span class=GramE>2 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;9. What is one indicator of AI-generated text?&quot;, options:
[&quot;Clear references&quot;, &quot;Lack of local knowledge or confidently
wrong statements&quot;, &quot;Use of British spelling&quot;], correct: <span
class=GramE>1 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;10. If AI misuse is found after a declaration form has been
signed, what must teachers do?&quot;, options: [&quot;Ask the student to redo
the work&quot;, &quot;Report it to the awarding body&quot;, &quot;Remove the
mark and move on&quot;], correct: <span class=GramE>1 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;11. What is the safest way to interact with AI tools?&quot;,
options: [&quot;Share personal data to get better answers&quot;, &quot;Avoid
sharing sensitive information&quot;, &quot;Use AI only on public
computers&quot;], correct: <span class=GramE>1 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;12. Why is it important to check AI outputs?&quot;, options:
[&quot;AI always provides verified facts&quot;, &quot;AI often guesses and can
generate inaccurate content&quot;, &quot;AI can only give answers written by
experts&quot;], correct: <span class=GramE>1 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;13. Which example demonstrates ethical AI use?&quot;, options:
[&quot;Using AI to impersonate someone online&quot;, &quot;Using AI to support
ideas but citing it properly&quot;, &quot;Submitting AI-written work as your
own&quot;], correct: <span class=GramE>1 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;14. What is a responsible approach when using AI for
decision-making?&quot;, options: [&quot;Rely entirely on AI
recommendations&quot;, &quot;Treat AI suggestions critically and verify
them&quot;, &quot;Ignore human judgment in favour of AI&quot;], correct: <span
class=GramE>1 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>{
q</span>: &quot;15. Why must AI-generated content be acknowledged in academic
work?&quot;, options: [&quot;To hide how much AI was used&quot;, &quot;Because
it helps boost the grade&quot;, &quot;Because transparency prevents plagiarism
and maintains integrity&quot;], correct: <span class=GramE>2 }</span><o:p></o:p></p>

<p class=MsoNormal>];<o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>// --- QUESTION POOL SYSTEM ---<o:p></o:p></p>

<p class=MsoNormal>let questionPool = [<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>getNextQuestion(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(questionPool.length === 0) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>questionPool =
[...QUIZ_DATA]; // Refill if empty<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const randomIndex
= Math.floor(Math.random() * questionPool.length<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const question =
questionPool[randomIndex<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>questionPool.splice(randomIndex, 1); // Remove used question so it
doesn't repeat immediately<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>return <span
class=GramE>question;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>// --- MAP SYSTEM ---<o:p></o:p></p>

<p class=MsoNormal>const TILE_SIZE = <span class=GramE>40;</span><o:p></o:p></p>

<p class=MsoNormal>const COLS = <span class=GramE>20;</span><o:p></o:p></p>

<p class=MsoNormal>const ROWS = <span class=GramE>15;</span><o:p></o:p></p>

<p class=MsoNormal>// FURNITURE MAPPING: 3=Table, 4=Chair, 5=Plant<o:p></o:p></p>

<p class=MsoNormal>const MAP_LAYOUTS = {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'COMMON_ROOM': {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>name:
&quot;COMMON ROOM (HUB)&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color:
'#333344',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>data: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,5,0,0,0,0,0,4,3,3,4,0,0,0,0,0,0,0,5,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,4,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,4,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,1], // Door South to Corridor<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>npcs: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>{ id:
'mcmahon_intro', name: 'Mrs McMahon', role: 'Teacher', spriteKey: 'oneill',
color: '#5555ff', gridX: 10, gridY: 3, dialogue: [&quot;Improper use of AI is
sweeping Archbishop Ilsley.&quot;, &quot;The bugs have locked Mrs Grant in her
office with a Glitch.&quot;, &quot;You need to help the school by destroying
three bugs to unlock her office then fight the Glitch.&quot;, &quot;Good
Luck.&quot;] },<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'clinton', name: 'Mr Clinton', role: 'Head Teacher',
spriteKey: 'clinton', color: '#333333', gridX: 5, gridY: 5, dialogue: [&quot;I
am Mr Clinton, the head teacher.&quot;, &quot;We have some bugs.&quot;<span
class=GramE>] }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>{ id:
'oneill_strict_cr', name: 'Mrs O\'Neill', role: 'Head of Behaviour', spriteKey:
'oneill_strict', color: '#ff0000', gridX: 15, gridY: 8, dialogue: [],
autoInteract: true, damage: 10, messages: [&quot;You are being too loud!&quot;,
&quot;I told you to get to lesson!&quot;] },<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'brookes', name: 'Mr Brookes', role: 'Media &amp;
Film', spriteKey: 'brookes', color: '#44aa44', gridX: 2, gridY: 5, dialogue:
[&quot;*SIGH* I told them we needed more AI and Media Literacy
training...&quot;, &quot;But would they listen... No!&quot;, &quot;Anyways, you
might want to avoid Ms O'Neill.&quot;, &quot;If you need some health points,
visit the canteen or chapel.&quot;<span class=GramE>] }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>minions: [],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>doors: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 9, y: 13, target: 'CORRIDOR', targetX: 9, targetY: <span
class=GramE>2 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 10, y: 13, target: 'CORRIDOR', targetX: 10, targetY: <span
class=GramE>2 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>crowd: []<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'CORRIDOR': {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>name:
&quot;MAIN CORRIDOR&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color:
'#222222',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>data: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1], // Door North to Common Room<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2], // East to Canteen<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1], // West to Chapel<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,1], // South to Classrooms<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>npcs: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'botwright', name: 'Mr Botwright', role: 'Tutor',
spriteKey: 'botwright', color: '#5555ff', gridX: 12, gridY: 8, dialogue:
[&quot;Lots of kids in the corridor today, they must be looking for the
glitch!&quot;<span class=GramE>] }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'oneill_strict', name: 'Mrs O\'Neill', role: 'Head of
Behaviour', spriteKey: 'oneill_strict', color: '#ff0000', gridX: 5, gridY: 6,
dialogue: [], autoInteract: true, damage: 10, messages: [&quot;You are being
too loud!&quot;, &quot;I told you to get to lesson!&quot;<span class=GramE>] }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>minions: [],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>doors: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 9, y: 0, target: 'COMMON_ROOM', targetX: 9, targetY: <span
class=GramE>12 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 10, y: 0, target: 'COMMON_ROOM', targetX: 10, targetY: <span
class=GramE>12 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 19, y: 3, target: 'CANTEEN', targetX: 2, targetY: <span
class=GramE>7 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 0, y: 5, target: 'CHAPEL', targetX: 18, targetY: <span
class=GramE>7 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 9, y: 13, target: 'CLASSROOM_HALL', targetX: 9,
targetY: <span class=GramE>1 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 10, y: 13, target: 'CLASSROOM_HALL', targetX: 10,
targetY: <span class=GramE>1 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>crowd: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 4, gridY: 3, spriteKey: 'student', facingRight: <span
class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 16, gridY: 4, spriteKey: 'student', facingRight: <span
class=GramE>false }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 8, gridY: 10, spriteKey: 'student', facingRight: <span
class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 14, gridY: 11, spriteKey: 'student', facingRight: <span
class=GramE>false }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 2, gridY: 7, spriteKey: 'student', facingRight: <span
class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 18, gridY: 6, spriteKey: 'student', facingRight: <span
class=GramE>false }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'CANTEEN': {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>name:
&quot;THE CANTEEN&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color:
'#302020',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>data: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,3,3,3,3,0,0,3,3,3,3,0,0,3,3,3,3,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,4,4,4,4,0,0,4,4,4,4,0,0,4,4,4,4,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1], // Door West<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,3,3,3,3,0,0,3,3,3,3,0,0,3,3,3,3,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,4,4,4,4,0,0,4,4,4,4,0,0,4,4,4,4,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,6,6,6,6,6,6,6,0,0,0,0,0,0,1], // Serving Counter<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>npcs: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'julie', name: 'Julie', role: 'Canteen Staff',
spriteKey: 'julie', color: '#ffffff', gridX: 10, gridY: 11, dialogue: [&quot;Hi
love! Need a break?&quot;, &quot;Here, have a hot meal. It's on the
house.&quot;], <span class=GramE>heal:</span> <span class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'student_chicken', name: 'Student', role: 'Year 12',
spriteKey: 'student', color: '#ddddff', gridX: 8, gridY: 10, dialogue:
[&quot;Do the bugs know it is Chicken <span class=GramE>Burger day</span>?&quot;<span
class=GramE>] }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>minions: [],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>doors: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 0, y: 7, target: 'CORRIDOR', targetX: 18, targetY: <span
class=GramE>3 }</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>crowd: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 2, gridY: 4, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 14, gridY: 4, spriteKey: 'student', facingRight:
false, static: <span class=GramE>true }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'CHAPEL': {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>name:
&quot;THE CHAPEL&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color:
'#202040',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>data: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,0,1], // Altar<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,4,4,4,4,0,0,0,0,0,4,4,4,4,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,4,4,4,4,0,0,0,0,0,4,4,4,4,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,4,4,4,4,0,0,0,0,0,4,4,4,4,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2], // Door East<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,4,4,4,4,0,0,0,0,0,4,4,4,4,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,4,4,4,4,0,0,0,0,0,4,4,4,4,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>npcs: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'deacon', name: 'Deacon Martin', role: 'Chaplain',
spriteKey: 'deacon', color: '#aaaaaa', gridX: 9, gridY: 2, dialogue:
[&quot;Peace be with you.&quot;, &quot;Let me heal your weary soul.&quot;],
heal: <span class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'student_praying', name: 'Student', role: 'Year 13',
spriteKey: 'student', color: '#ddddff', gridX: 12, gridY: 4, dialogue:
[&quot;Please let the bugs go away...&quot;, &quot;Amen.&quot;<span
class=GramE>] }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>minions: [],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>doors: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 19, y: 7, target: 'CORRIDOR', targetX: 1, targetY: <span
class=GramE>5 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>crowd: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 4, gridY: 4, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 4, gridY: 10, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'CLASSROOM_HALL':
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>name:
&quot;LOWER CORRIDOR&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color:
'#222222',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>data: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1], // North to Main Corridor<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[2,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,2], // West(C1), Mid(C2),
East(C3), <span class=GramE>FarEast(</span>Boss)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>npcs: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>{ id:
'oneill_strict_ch', name: 'Mrs O\'Neill', role: 'Head of Behaviour', spriteKey:
'oneill_strict', color: '#ff0000', gridX: 3, gridY: 3, dialogue: [],
autoInteract: true, damage: 10, messages: [&quot;You are being too loud!&quot;,
&quot;I told you to get to lesson!&quot;] }<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>minions: [],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>doors: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 9, y: 0, target: 'CORRIDOR', targetX: 9, targetY: <span
class=GramE>12 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 10, y: 0, target: 'CORRIDOR', targetX: 10, targetY: <span
class=GramE>12 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 0, y: 4, target: 'CLASSROOM_1', targetX: 18, targetY: <span
class=GramE>7 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 6, y: 4, target: 'CLASSROOM_2', targetX: 9, targetY: <span
class=GramE>13 }</span>, <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 12, y: 4, target: 'CLASSROOM_3', targetX: 9, targetY: <span
class=GramE>13 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 19, y: 4, target: 'OFFICE', targetX: 1, targetY: <span
class=GramE>7 }</span> // Boss Room<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>crowd: []<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'CLASSROOM_1': {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>name:
&quot;CLASSROOM 1&quot;, color: '#252525',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>data:
[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,0,3,3,0,3,3,0,3,3,0,0,0,0,0,0,0,1],[1,4,4,0,4,4,0,4,4,0,4,4,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,0,3,3,0,3,3,0,3,3,0,0,0,0,0,0,0,1],[1,4,4,0,4,4,0,4,4,0,4,4,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>npcs: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'jones', name: 'Mr Jones', role: 'History', spriteKey:
'jones', color: '#aaffaa', gridX: 15, gridY: 2, dialogue: [&quot;AI keeps
hallucinating facts about the Tudors.&quot;, &quot;I need real sources!&quot;<span
class=GramE>] }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>minions:
[{gridX:<span class=GramE>5,gridY</span>:<span class=GramE>5,spriteKey</span>:'bug<span
class=GramE>',active</span>:true}], doors: [{x:<span class=GramE>19,y</span>:<span
class=GramE>7,target</span>:'CLASSROOM_HALL<span class=GramE>',targetX</span>:<span
class=GramE>1,targetY</span>:4}],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>crowd: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 2, gridY: 4, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 5, gridY: 4, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 8, gridY: 10, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'CLASSROOM_2': {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>name:
&quot;CLASSROOM 2&quot;, color: '#252525',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>data:
[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,0,3,3,0,3,3,0,3,3,0,0,0,0,0,0,0,1],[1,4,4,0,4,4,0,4,4,0,4,4,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,0,3,3,0,3,3,0,3,3,0,0,0,0,0,0,0,1],[1,4,4,0,4,4,0,4,4,0,4,4,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>npcs: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'russell', name: 'Miss Russell', role: 'Science',
spriteKey: 'russell', color: '#aaaaff', gridX: 2, gridY: 2, dialogue:
[&quot;Data must be verified.&quot;, &quot;Don't let AI make up your
results.&quot;<span class=GramE>] }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>minions:
[{gridX:<span class=GramE>10,gridY</span>:<span class=GramE>8,spriteKey</span>:'bug<span
class=GramE>',active</span>:true}], doors: [{x:<span class=GramE>9,y</span>:<span
class=GramE>13,target</span>:'CLASSROOM_HALL<span class=GramE>',targetX</span>:<span
class=GramE>6,targetY</span>:5}],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>crowd: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 4, gridY: 4, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 10, gridY: 4, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 2, gridY: 10, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'CLASSROOM_3': {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>name:
&quot;CLASSROOM 3&quot;, color: '#252525',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>data:
[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,0,3,3,0,3,3,0,3,3,0,0,0,0,0,0,0,1],[1,4,4,0,4,4,0,4,4,0,4,4,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,0,3,3,0,3,3,0,3,3,0,0,0,0,0,0,0,1],[1,4,4,0,4,4,0,4,4,0,4,4,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>npcs: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'mckeown', name: 'Mrs McKeown', role: 'English',
spriteKey: 'mckeown', color: '#ffaaaa', gridX: 15, gridY: 2, dialogue:
[&quot;Where is your voice?&quot;, &quot;This essay sounds like a robot wrote
it.&quot;<span class=GramE>] }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>minions:
[{gridX:<span class=GramE>14,gridY</span>:<span class=GramE>5,spriteKey</span>:'bug<span
class=GramE>',active</span>:true}], doors: [{x:<span class=GramE>9,y</span>:<span
class=GramE>13,target</span>:'CLASSROOM_HALL<span class=GramE>',targetX</span>:<span
class=GramE>12,targetY</span>:5}],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>crowd: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 1, gridY: 4, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 7, gridY: 4, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ gridX</span>: 5, gridY: 10, spriteKey: 'student', facingRight:
true, static: <span class=GramE>true }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>'OFFICE': {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>name:
&quot;MRS GRANT'S OFFICE&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color:
'#301010',<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>data: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,0,1], // Big Desk<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1], // Door West - FIXED to type
2<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>npcs: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ id</span>: 'grant_final', name: 'Mrs Grant', role: 'Head of Sixth
Form', spriteKey: 'grant', color: '#ff5555', gridX: 16, gridY: 7, dialogue:
[&quot;The Main Glitch is right there!&quot;, &quot;Defeat it to recover the
JCQ Guidance data!&quot;<span class=GramE>] }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>minions: [],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>doors: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>{ x</span>: 0, y: 7, target: 'CLASSROOM_HALL', targetX: 18,
targetY: <span class=GramE>4 }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>boss: <span
class=GramE>{ active</span>: true, gridX: 9, gridY: 7, spriteKey: 'glitch', hp:
<span class=GramE>200 }</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>crowd: []<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>};<o:p></o:p></p>

<p class=MsoNormal>const STATE = <span class=GramE>{ INTRO</span>: 0, ROAM: 1,
DIALOGUE: 2, BATTLE: 3, GAMEOVER: 4, WIN: 5, TRANSITION: <span class=GramE>6 }</span>;<o:p></o:p></p>

<p class=MsoNormal>let currentState = STATE.<span class=GramE>INTRO;</span><o:p></o:p></p>

<p class=MsoNormal>let frames = <span class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal>let winTimer = 0; // New timer for victory screen<o:p></o:p></p>

<p class=MsoNormal>let transitionTimer = <span class=GramE>0;</span> <o:p></o:p></p>

<p class=MsoNormal>let introCutsceneActive = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal>let introCutsceneFinished = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal>const player = { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>gridX: 10, gridY:
7, // Start center of Common Room<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>x: 400, y: 280, <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>targetX: 400,
targetY: 280,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>isMoving: false,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>facingRight: true,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>bobFrame: 0,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>hp: 100, maxHp:
100, auth: 100, maxAuth: 100, <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>spriteKey:
'player', inventory: [], interactionCooldown: 0,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>autoInteractCooldown: 0, // Cooldown for Mrs O'Neill auto-interactions<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>currentRoom:
'COMMON_ROOM'<o:p></o:p></p>

<p class=MsoNormal>};<o:p></o:p></p>

<p class=MsoNormal>// Variables for the current room state<o:p></o:p></p>

<p class=MsoNormal>let activeRoom = MAP_LAYOUTS['COMMON_ROOM'<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal>let activeMap = activeRoom.<span class=GramE>data;</span><o:p></o:p></p>

<p class=MsoNormal>let activeNPCs = activeRoom.<span class=GramE>npcs;</span><o:p></o:p></p>

<p class=MsoNormal>let activeMinions = activeRoom.<span class=GramE>minions;</span><o:p></o:p></p>

<p class=MsoNormal>let activeCrowd = activeRoom.crowd || [<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal>let activeBoss = <span class=GramE>null;</span><o:p></o:p></p>

<p class=MsoNormal>let battleState = 'MENU<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal>let battleTurn = 'PLAYER<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal>let activeBattleEnemy = {<span class=GramE>};</span><o:p></o:p></p>

<p class=MsoNormal>let battleMenuIdx = <span class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal>let battleMsg = &quot;<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal>let battleEffects = [<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal>let battleShake = <span class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal>let matrixRain = [<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal>let currentQuestion = <span class=GramE>null;</span><o:p></o:p></p>

<p class=MsoNormal>let selectedOptionIdx = <span class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal>let pendingAction = '<span class=GramE>';</span> <o:p></o:p></p>

<p class=MsoNormal>// INPUT HANDLING FIX: Add keyProcessed flag<o:p></o:p></p>

<p class=MsoNormal>const keys = <span class=GramE>{ ArrowUp</span>: false,
ArrowDown: false, ArrowLeft: false, ArrowRight: false, &quot; &quot;: <span
class=GramE>false }</span>;<o:p></o:p></p>

<p class=MsoNormal>let keyProcessed = <span class=GramE>{ ArrowUp</span>:
false, ArrowDown: false, ArrowLeft: false, ArrowRight: false, &quot; &quot;: <span
class=GramE>false }</span>;<o:p></o:p></p>

<p class=MsoNormal><span class=GramE>window.addEventListener</span>('keydown',
e =&gt; { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if(<span
class=GramE>keys.hasOwnProperty</span>(e.key) || e.key === &quot; &quot;) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>keys[e.key] = <span
class=GramE>true;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>});<o:p></o:p></p>

<p class=MsoNormal><span class=GramE>window.addEventListener</span>('keyup', e
=&gt; { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if(<span
class=GramE>keys.hasOwnProperty</span>(e.key) || e.key === &quot; &quot;) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>keys[e.key] = <span
class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>keyProcessed[e.key] = false; // Reset flag on release<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>});<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>initMatrixRain(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>matrixRain = [<span
class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>for(</span>let
i=0; i&lt;50; i++) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>matrixRain.push<span class=GramE>({ x</span>: Math.random() * <span
class=GramE>canvas.width</span>, y: Math.random() * <span class=GramE>canvas.height</span>,
speed: Math.random() * 5 + 2, chars: &quot;101010 AI ERROR JCQ<span
class=GramE>&quot; });</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>// --- ROOM SWITCHING WITH IMPROVED LOCK SYSTEM ---<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>switchRoom(</span>roomKey,
startX, startY) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Store previous
room for music logic<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const previousRoom
= <span class=GramE>player.currentRoom</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Check Lock for
OFFICE - IMPROVED VERSION<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (roomKey ===
'OFFICE') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
c1Cleared = MAP_LAYOUTS['CLASSROOM_1'<span class=GramE>].minions</span>.<span
class=GramE>every(</span>m =<span class=GramE>&gt; !m</span>.active<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
c2Cleared = MAP_LAYOUTS['CLASSROOM_2'<span class=GramE>].minions</span>.<span
class=GramE>every(</span>m =<span class=GramE>&gt; !m</span>.active<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
c3Cleared = MAP_LAYOUTS['CLASSROOM_3'<span class=GramE>].minions</span>.<span
class=GramE>every(</span>m =<span class=GramE>&gt; !m</span>.active<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if <span
class=GramE>(!c</span>1Cleared |<span class=GramE>| !c</span>2Cleared |<span
class=GramE>| !c</span>3Cleared) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playSound('ALERT'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
status = `C1: ${c1<span class=GramE>Cleared ?</span> '<span class=GramE>' :</span>
' <span style='font-family:"Segoe UI Symbol",sans-serif;mso-bidi-font-family:
"Segoe UI Symbol"'></span> '} | C2: ${c2<span class=GramE>Cleared ?</span> '<span
class=GramE>' :</span> ' <span style='font-family:"Segoe UI Symbol",sans-serif;
mso-bidi-font-family:"Segoe UI Symbol"'></span> '} | C3: ${c3<span
class=GramE>Cleared ?</span> '' : ' <span style='font-family:"Segoe UI Symbol",sans-serif;
mso-bidi-font-family:"Segoe UI Symbol"'></span> '}`;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>startDialogue(</span>{ <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>name:
'SECURITY SYSTEM', <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>role:
'LOCKDOWN', <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>color:
'#ff0000', <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>dialogue: [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;&gt;&gt;&gt; ACCESS DENIED &lt;&lt;&lt;&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>&quot;You must clear the bugs in ALL 3 Classrooms first.&quot;,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>status<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>],<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>heal:
false <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>});<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>return <span
class=GramE>false;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.currentRoom</span>
= <span class=GramE>roomKey;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>activeRoom = MAP_<span
class=GramE>LAYOUTS[</span>roomKey<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>activeMap =
activeRoom.<span class=GramE>data;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>activeNPCs =
activeRoom.<span class=GramE>npcs;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>activeMinions =
activeRoom.<span class=GramE>minions;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>activeCrowd =
activeRoom.crowd || [<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>activeBoss =
activeRoom.boss || <span class=GramE>null;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.gridX</span>
= <span class=GramE>startX;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.gridY</span>
= <span class=GramE>startY;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>player.x = startX
* TILE_<span class=GramE>SIZE;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.y</span>
= startY * TILE_<span class=GramE>SIZE;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.targetX</span>
= player.<span class=GramE>x;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.targetY</span>
= <span class=GramE>player.y</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>document.getElementById</span>('room-name'<span
class=GramE>).innerText</span> = <span class=GramE>activeRoom.name;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>document.getElementById</span>('room-name'<span
class=GramE>).style</span>.display = 'block<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>setTimeout(</span>()
=&gt; <span class=GramE>document.getElementById</span>('room-name'<span
class=GramE>).style</span>.display = 'none', 2000<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Only change
music when entering or leaving chapel<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (roomKey ===
'CHAPEL') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playMusic('CHAPEL'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if
(previousRoom === 'CHAPEL') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Leaving
chapel, return to roam music<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playMusic('ROAM'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Otherwise keep
current music playing (ROAM continues between rooms)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>return <span
class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>// --- MOVEMENT LOGIC ---<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>tryMove(</span>dx, dy) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.isMoving</span>) <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const nextX = <span
class=GramE>player.gridX</span> + <span class=GramE>dx;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const nextY = <span
class=GramE>player.gridY</span> + <span class=GramE>dy;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (nextX &lt; 0
|| nextX &gt;= COLS || nextY &lt; 0 || nextY &gt;= ROWS) <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const tile =
activeMap[nextY][nextX<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (tile === 1)
return; // Wall<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Furniture
Blocking (3=Table, 4=Chair, 5=Plant, 6=Altar) - Treat as walls<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (tile &gt;= 3
&amp;&amp; tile &lt;= 6) <span class=GramE>return;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Check Encounter
on target tile BEFORE moving<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>for(</span>let
i=0; i&lt;activeMinions.length; i++) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let m =
activeMinions[i<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>m.active</span> &amp;&amp; <span class=GramE>m.gridX</span> ===
nextX &amp;&amp; <span class=GramE>m.gridY</span> === nextY) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>startBattle(</span>'minion', i<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>return; //
Cancel move, start battle<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (activeBoss
&amp;&amp; activeBoss.active &amp;&amp; activeBoss.gridX === nextX &amp;&amp;
activeBoss.gridY === nextY) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>startBattle(</span>'boss', -1<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Check Door<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>for (let door of
activeRoom.doors) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (door.x ===
nextX &amp;&amp; <span class=GramE>door.y</span> === nextY) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>if(</span>!<span class=GramE>switchRoom(door.target</span>, <span
class=GramE>door.targetX</span>, <span class=GramE>door.targetY</span>)) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>//
Lock message handled in switchRoom<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>return;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>for(</span>let
npc of activeNPCs) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>npc.gridX</span> === nextX &amp;&amp; <span class=GramE>npc.gridY</span>
=== nextY) <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.gridX</span>
= <span class=GramE>nextX;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.gridY</span>
= <span class=GramE>nextY;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.targetX</span>
= nextX * TILE_<span class=GramE>SIZE;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.targetY</span>
= nextY * TILE_<span class=GramE>SIZE;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.isMoving</span>
= <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.bobFrame</span>
= <span class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (dx &gt; 0) <span
class=GramE>player.facingRight</span> = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (dx &lt; 0) <span
class=GramE>player.facingRight</span> = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>update(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>frames+<span
class=GramE>+;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentState
=== STATE.INTRO) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys[</span>&quot; &quot;] &amp;<span class=GramE>&amp;
!keyProcessed</span>[&quot; &quot;]) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>keyProcessed[</span>&quot; &quot;] = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>currentState = STATE.<span class=GramE>ROAM;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.interactionCooldown</span> = <span class=GramE>20;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>document.getElementById</span>('intro-screen'<span class=GramE>).style</span>.display
= 'none<span class=GramE>';</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// TRIGGER
CUTSCENE<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if <span
class=GramE>(!introCutsceneFinished</span>) introCutsceneActive = <span
class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentState
=== STATE.TRANSITION) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>transitionTimer-<span class=GramE>-;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(transitionTimer &lt;= 0) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>currentState = STATE.<span class=GramE>BATTLE;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Small
delay to let encounter alarm finish<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>setTimeout(</span>() =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playMusic('BATTLE'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}, 100<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Update Win
Timer<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentState
=== STATE.WIN) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>winTimer+<span
class=GramE>+;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentState
=== STATE.ROAM) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.interactionCooldown</span> &gt; 0) <span class=GramE>player.interactionCooldown</span>-<span
class=GramE>-;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.autoInteractCooldown</span> &gt; 0) <span class=GramE>player.autoInteractCooldown</span>-<span
class=GramE>-;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Crowd
Movement (Every 45 frames)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (frames %
45 === 0) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>activeCrowd.forEach(p =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>p.static</span>) return; // Skip movement for static students<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
dir = Math.floor(Math.random() * 4); // <span class=GramE>0:up</span>, <span
class=GramE>1:down</span>, <span class=GramE>2:left</span>, <span class=GramE>3:right</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let dx
= 0, dy = <span class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(dir===0) dy=-1; else if(dir===1) dy=1; else if(dir===2) dx=-1; else dx=<span
class=GramE>1;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
nx = <span class=GramE>p.gridX</span> + <span class=GramE>dx;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
ny = <span class=GramE>p.gridY</span> + <span class=GramE>dy;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>//
Collision checks<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (nx
&gt;= 0 &amp;&amp; nx &lt; COLS &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; ROWS)
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>//
Check walls<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(activeMap[ny][nx] === 0 &amp;<span class=GramE>&amp; !</span>(nx===<span
class=GramE>player.gridX</span> &amp;&amp; ny===<span class=GramE>player.gridY</span>))
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>// Check NPCs<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>let hitNPC = activeNPCs.some(n =&gt; <span class=GramE>n.gridX</span>
=== nx &amp;&amp; <span class=GramE>n.gridY</span> === ny<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>// Check <span class=GramE>other</span> crowd<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>let hitCrowd = activeCrowd.some(c =&gt; <span class=GramE>c !</span>== p
&amp;&amp; <span class=GramE>c.gridX</span> === nx &amp;&amp; <span
class=GramE>c.gridY</span> === ny<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>if <span class=GramE>(!hitNPC</span> &amp;<span class=GramE>&amp;
!hitCrowd</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>p.gridX</span> = <span class=GramE>nx;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>p.gridY</span> = <span class=GramE>ny;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>p.facingRight</span> = dx &gt; <span class=GramE>0;</span>
<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>});<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// --- INTRO
CUTSCENE LOGIC ---<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(introCutsceneActive) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if <span
class=GramE>(!player</span>.isMoving) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>//
Move Up until y=4<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.gridY</span> &gt; 4) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>tryMove(</span>0, -1<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>//
Arrived<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>introCutsceneActive = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>introCutsceneFinished = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.facingRight</span> = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>const npc = activeNPCs.find(n =&gt; n.id === 'mcmahon_intro'<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>if(npc) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>player.interactionCooldown</span> = <span class=GramE>0;</span>
<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>startDialogue(npc<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Normal
Auto-Interact Logic (only if not in cutscene)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else if (<span
class=GramE>player.autoInteractCooldown</span> === 0 &amp;<span class=GramE>&amp;
!player</span>.isMoving) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
adjacentPositions = [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>{x: <span
class=GramE>player.gridX</span>, y: <span class=GramE>player.gridY</span> - 1},
{x: <span class=GramE>player.gridX</span>, y: <span class=GramE>player.gridY</span>
+ 1},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>{x: <span
class=GramE>player.gridX</span> - 1, y: <span class=GramE>player.gridY</span>},
{x: <span class=GramE>player.gridX</span> + 1, y: <span class=GramE>player.gridY</span>},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>{x: <span
class=GramE>player.gridX</span>, y: <span class=GramE>player.gridY</span>} //
Same tile<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>];<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>for (let
pos of adjacentPositions) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>for
(let npc of activeNPCs) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(<span class=GramE>npc.autoInteract</span> &amp;&amp; <span class=GramE>npc.gridX</span>
=== pos.x &amp;&amp; <span class=GramE>npc.gridY</span> === <span class=GramE>pos.y</span>)
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>// Trigger auto-interaction<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>const randomMessage = <span class=GramE>npc.messages</span>[Math.floor(Math.random()
* <span class=GramE>npc.messages</span>.length)<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>player.hp</span> -= <span class=GramE>npc.damage</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playSound('ALERT'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>// Check for game over<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>if (<span class=GramE>player.hp</span> &lt;= 0) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>loseGame(</span>&quot;Caught by Mrs O'Neill!&quot;<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>startDialogue(</span>{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>name: npc.name,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>role: <span class=GramE>npc.role</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>color: <span class=GramE>npc.color</span>,<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>dialogue: [randomMessage, `[-${<span class=GramE>npc.damage</span>} <span
class=GramE>HP]`</span>]<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>});<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>player.autoInteractCooldown</span> = 180; // 3 seconds
at 60fps<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>break;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// MOVEMENT
ANIMATION (Applies to both cutscene and manual movement)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.isMoving</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
speed = <span class=GramE>4;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const dx =
<span class=GramE>player.targetX</span> - player.<span class=GramE>x;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const dy =
<span class=GramE>player.targetY</span> - <span class=GramE>player.y</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(Math.abs(dx) &lt;= speed &amp;&amp; Math.abs(dy) &lt;= speed) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>player.x = <span class=GramE>player.targetX</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.y</span> = <span class=GramE>player.targetY</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.isMoving</span> = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>player.x += Math.sign(dx) * <span class=GramE>speed;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.y</span> += Math.sign(dy) * <span class=GramE>speed;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.bobFrame</span> += <span class=GramE>0.2;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// MANUAL
INPUT (Only if not moving and not cutscene)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else if <span
class=GramE>(!introCutsceneActive</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys.ArrowUp</span>) <span class=GramE>tryMove(</span>0, -1<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else if (<span
class=GramE>keys.ArrowDown</span>) <span class=GramE>tryMove(</span>0, 1<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else if (<span
class=GramE>keys.ArrowLeft</span>) <span class=GramE>tryMove(</span>-1, 0<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else if (<span
class=GramE>keys.ArrowRight</span>) <span class=GramE>tryMove(</span>1, 0<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// INTERACTION
KEY (Only if not cutscene)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys[</span>&quot; &quot;] &amp;<span class=GramE>&amp;
!keyProcessed</span>[&quot; &quot;] &amp;<span class=GramE>&amp; !player</span>.isMoving
&amp;&amp; <span class=GramE>player.interactionCooldown</span> === 0 &amp;<span
class=GramE>&amp; !introCutsceneActive</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>keyProcessed[</span>&quot; &quot;] = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let
interact = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
adjacentPositions = [<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>{x: <span
class=GramE>player.gridX</span>, y: <span class=GramE>player.gridY</span> - 1},
{x: <span class=GramE>player.gridX</span>, y: <span class=GramE>player.gridY</span>
+ 1},<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>{x: <span
class=GramE>player.gridX</span> - 1, y: <span class=GramE>player.gridY</span>},
{x: <span class=GramE>player.gridX</span> + 1, y: <span class=GramE>player.gridY</span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>];<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>for (let
pos of adjacentPositions) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>for
(let npc of activeNPCs) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(<span class=GramE>npc.gridX</span> === pos.x &amp;&amp; <span class=GramE>npc.gridY</span>
=== <span class=GramE>pos.y</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>if (<span class=GramE>npc.heal</span>) <span class=GramE>player.hp</span>
= <span class=GramE>player.maxHp</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>startDialogue(npc<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>interact = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span><span class=GramE>break;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(interact) <span class=GramE>break;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentState
=== STATE.DIALOGUE) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys[</span>&quot; &quot;] &amp;<span class=GramE>&amp;
!keyProcessed</span>[&quot; &quot;] &amp;&amp; <span class=GramE>player.interactionCooldown</span>
=== 0) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>keyProcessed[</span>&quot; &quot;] = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>advanceDialogue();</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.interactionCooldown</span> &gt; 0) <span class=GramE>player.interactionCooldown</span>-<span
class=GramE>-;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentState
=== STATE.BATTLE) <span class=GramE>updateBattle();</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>let dialogueQueue = []; let dialogueSpeaker = &quot;<span
class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal>function startDialogue(npc) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.interactionCooldown</span> &gt; 0) <span class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>playSound('SELECT'<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>dialogueQueue =
[...<span class=GramE>npc.dialogue];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>npc.heal</span>) dialogueQueue.push(&quot;[HP RESTORED]&quot;<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>dialogueSpeaker = <span
class=GramE>npc.name;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>currentState =
STATE.<span class=GramE>DIALOGUE;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>document.getElementById</span>('dialogue-box'<span
class=GramE>).style</span>.display = 'block<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>document.getElementById</span>('dialogue-name'<span
class=GramE>).innerText</span> = <span class=GramE>dialogueSpeaker;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>document.getElementById</span>('dialogue-text'<span
class=GramE>).innerText</span> = <span class=GramE>dialogueQueue[</span>0<span
class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.interactionCooldown</span>
= <span class=GramE>15;</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>advanceDialogue(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>dialogueQueue.shift(<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(dialogueQueue.length === 0) <span class=GramE>{ currentState</span> =
STATE.ROAM; <span class=GramE>document.getElementById</span>('dialogue-box'<span
class=GramE>).style</span>.display = 'none'; <span class=GramE>player.interactionCooldown</span>
= 20<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else <span
class=GramE>{ document</span>.getElementById('dialogue-text'<span class=GramE>).innerText</span>
= <span class=GramE>dialogueQueue[</span>0]; <span class=GramE>player.interactionCooldown</span>
= 15<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>startBattle(</span>type, index) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>playEncounterSfx(</span>);
// Play encounter alarm!<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>currentState =
STATE.TRANSITION; // Wipe effect first<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>transitionTimer =
90; // frames (increased for longer siren)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleState =
'MENU<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleTurn =
'PLAYER<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMenuIdx = <span
class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>initMatrixRain();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>player.interactionCooldown</span>
= <span class=GramE>20;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (type ===
'minion') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>activeBattleEnemy = <span class=GramE>{ type</span>: 'minion', name:
'MINOR BUG', hp: 50, maxHp: 50, spriteKey: 'bug', minionIndex: index, lvl: <span
class=GramE>5 }</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMsg =
&quot;A wild BUG appeared!<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>activeBattleEnemy = <span class=GramE>{ type</span>: 'boss', name: 'THE
GLITCH', hp: 200, maxHp: 200, spriteKey: 'glitch', minionIndex: -1, lvl: <span
class=GramE>50 }</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMsg =
&quot;THE GLITCH wants to battle!<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>updateBattle(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleShake
&gt; 0) battleShake *= 0.9; if (battleShake &lt; 0.5) battleShake = <span
class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>for (let i =
battleEffects.length - 1; i &gt;= 0; i--) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let p =
battleEffects[i]; p.x += <span class=GramE>p.vx</span>; <span class=GramE>p.y</span>
+= <span class=GramE>p.vy</span>; <span class=GramE>p.life</span>-<span
class=GramE>-;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>p.life</span> &lt;= 0) battleEffects.splice(i, 1<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleState
=== 'FAINT_ANIM') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>return;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleState
=== 'MENU') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.interactionCooldown</span> &gt; 0) <span class=GramE>player.interactionCooldown</span>-<span
class=GramE>-;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Use
keyProcessed check for menu navigation to prevent rapid firing<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys.ArrowUp</span> &amp;<span class=GramE>&amp; !</span>keyProcessed.ArrowUp
&amp;&amp; <span class=GramE>player.interactionCooldown</span> === 0) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>keyProcessed.ArrowUp = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleMenuIdx = <span class=GramE>Math.max(</span>0, battleMenuIdx - 1<span
class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.interactionCooldown</span> = <span class=GramE>5;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playSound('SELECT'<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys.ArrowDown</span> &amp;<span class=GramE>&amp; !</span>keyProcessed.ArrowDown
&amp;&amp; <span class=GramE>player.interactionCooldown</span> === 0) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>keyProcessed.ArrowDown = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleMenuIdx = <span class=GramE>Math.min(</span>2, battleMenuIdx + 1<span
class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.interactionCooldown</span> = <span class=GramE>5;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playSound('SELECT'<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys[</span>&quot; &quot;] &amp;<span class=GramE>&amp;
!keyProcessed</span>[&quot; &quot;] &amp;&amp; <span class=GramE>player.interactionCooldown</span>
=== 0) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>keyProcessed[</span>&quot; &quot;] = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.interactionCooldown</span> = <span class=GramE>20;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>selectBattleAction(battleMenuIdx<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if
(battleState === 'QUESTION') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.interactionCooldown</span> &gt; 0) <span class=GramE>player.interactionCooldown</span>-<span
class=GramE>-;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys.ArrowUp</span> &amp;<span class=GramE>&amp; !</span>keyProcessed.ArrowUp
&amp;&amp; <span class=GramE>player.interactionCooldown</span> === 0) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>keyProcessed.ArrowUp = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>selectedOptionIdx = <span class=GramE>Math.max(</span>0,
selectedOptionIdx - 1<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.interactionCooldown</span> = <span class=GramE>5;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playSound('SELECT'<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys.ArrowDown</span> &amp;<span class=GramE>&amp; !</span>keyProcessed.ArrowDown
&amp;&amp; <span class=GramE>player.interactionCooldown</span> === 0) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>keyProcessed.ArrowDown = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>selectedOptionIdx = <span class=GramE>Math.min(</span>2,
selectedOptionIdx + 1<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.interactionCooldown</span> = <span class=GramE>5;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playSound('SELECT'<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys[</span>&quot; &quot;] &amp;<span class=GramE>&amp;
!keyProcessed</span>[&quot; &quot;] &amp;&amp; <span class=GramE>player.interactionCooldown</span>
=== 0) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>keyProcessed[</span>&quot; &quot;] = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.interactionCooldown</span> = <span class=GramE>20;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>checkAnswer();</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleState
=== 'VICTORY_WAIT') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>keys[</span>&quot; &quot;] &amp;<span class=GramE>&amp;
!keyProcessed</span>[&quot; &quot;] &amp;&amp; <span class=GramE>player.interactionCooldown</span>
=== 0) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>keyProcessed[</span>&quot; &quot;] = <span class=GramE>true;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.hp</span> = <span class=GramE>Math.min(player.maxHp</span>, <span
class=GramE>player.hp</span> + 10<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(activeBattleEnemy.type === 'minion') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>activeMinions[</span>activeBattleEnemy.minionIndex<span
class=GramE>].active</span> = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>currentState = STATE.<span class=GramE>ROAM;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.interactionCooldown</span> = <span class=GramE>30;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>//
Only play chapel music if in chapel, otherwise return to roam<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.currentRoom</span> === 'CHAPEL') playMusic('CHAPEL'<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else
playMusic('ROAM'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else <span
class=GramE>winGame();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.interactionCooldown</span> &gt; 0) <span class=GramE>player.interactionCooldown</span>-<span
class=GramE>-;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function selectBattleAction(idx) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (idx === 1) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>pendingAction
= 'AI<span class=GramE>';</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMsg =
&quot;Used AI Shortcut...<span class=GramE>&quot;;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleState =
'BUSY'; // LOCK INPUT<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>setTimeout(</span>executeAction, 1000<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if (idx ===
2) <span class=GramE>{ /</span>/ RUN<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMsg =
&quot;Got away safely!<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleState =
'BUSY<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>setTimeout(</span>() =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>currentState = STATE.<span class=GramE>ROAM;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.interactionCooldown</span> = <span class=GramE>30;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Only
play chapel music if in chapel, otherwise return to roam<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.currentRoom</span> === 'CHAPEL') playMusic('CHAPEL'<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else
playMusic('ROAM'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}, 1000<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// idx 0
(QUESTION)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>pendingAction
= 'DRAFT<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>currentQuestion = <span class=GramE>getNextQuestion(</span>); // Use the
pool system instead of raw random<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>selectedOptionIdx = <span class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleState =
'QUESTION<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>checkAnswer(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const isCorrect =
selectedOptionIdx === currentQuestion.<span class=GramE>correct;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (isCorrect) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMsg =
&quot;It's super effective!<span class=GramE>&quot;;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playSound('CORRECT'<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleState =
'BUSY'; // LOCK INPUT<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>setTimeout(</span>executeAction, 1000<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMsg =
&quot;It wasn't very effective...<span class=GramE>&quot;;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playSound('WRONG'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleState =
'ANIMATION<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>setTimeout(</span>() =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.hp</span> -= 20; battleShake = <span class=GramE>20;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleEffects.push({x: 150, y: 300, vx:0, <span class=GramE>vy:-</span>2,
life:60, type:'text', text:'-20', color:'#f44'}<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>if(player.hp</span> &lt;= 0) <span class=GramE>loseGame(</span>&quot;You
blacked out!&quot;); else <span class=GramE>endPlayerTurn();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}, 1000<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>executeAction(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleState =
'ANIMATION<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let dmg = <span
class=GramE>0;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (pendingAction
=== 'DRAFT') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>dmg = 30 +
Math.floor(Math.random<span class=GramE>()*</span>10<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMsg =
&quot;Player used CRITICAL THINKING!<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleEffects.push({x: 200, y: 350, targetX: 550, targetY: 150, vx: 10,
vy: -5, life: 40, type: 'projectile', icon: ' <span style='font-family:"Apple Color Emoji";
mso-bidi-font-family:"Apple Color Emoji"'>&#128196;</span> '}<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>setTimeout(</span>() =&gt; hitEnemy(dmg), 500<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if
(pendingAction === 'AI') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>dmg = 60; <span
class=GramE>player.auth</span> -= <span class=GramE>30;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMsg =
&quot;INCORRECT INFO! AI HALLUCINATED!<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleEffects.push({x: 200, y: 350, targetX: 550, targetY: 150, vx: 10,
vy: -5, life: 40, type: 'projectile', icon: ' <span style='font-family:"Apple Color Emoji";
mso-bidi-font-family:"Apple Color Emoji"'>&#129302;</span> '}<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>setTimeout(</span>() =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.hp</span> -= <span class=GramE>10;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleEffects.push({x: 150, y: 300, vx:0, <span class=GramE>vy:-</span>2,
life:60, type:'text', text:'-10', color:'#f44'}<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>hitEnemy(dmg<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}, 500<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function hitEnemy(dmg) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>activeBattleEnemy.hp -= <span class=GramE>dmg;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleEffects.push({x: 550, y: 100, vx:0, <span class=GramE>vy:-</span>2,
life:60, type:'text', text:dmg, color:'#fff'}<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleShake = 10;
playSound('HIT'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(activeBattleEnemy.hp &lt;= 0) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>playEnemyDownSfx();</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleState =
'FAINT_ANIM<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>setTimeout(</span>() =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>stopAllMusic(</span>); // Stop battle music<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>playVictoryFanfare(</span>); // Celebration fanfare<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMsg
= `${activeBattleEnemy.name} was <span class=GramE>destroyed!`</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Start
victory music after fanfare finishes<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>setTimeout(</span>() =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playMusic('WIN'); // Start victory music loop<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}, 1200);
// Wait for fanfare to play<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>setTimeout(</span>() =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleMsg = &quot;You gained 50 EXP &amp; HP!<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>playSound('CORRECT'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleState = 'VICTORY_WAIT<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.interactionCooldown</span> = <span class=GramE>20;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}, 1500<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}, 1000<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if (<span
class=GramE>player.auth</span> &lt;= 0) <span class=GramE>loseGame(</span>&quot;Disqualified
for Malpractice!&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else <span
class=GramE>setTimeout(</span>endPlayerTurn, 1000<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>endPlayerTurn(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleState =
'ENEMY_TURN<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleMsg =
`${activeBattleEnemy.name} used <span class=GramE>HALLUCINATION!`</span>;<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>setTimeout(</span>enemyAttack,
1500<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>enemyAttack(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let dmg = 10 +
Math.floor(Math.random<span class=GramE>()*</span>10<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(activeBattleEnemy.type === 'minion') dmg = <span class=GramE>5;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleEffects.push({x: 550, y: 150, targetX: 200, targetY: 350, vx: -10,
vy: 5, life: 40, type: 'projectile', spriteKey: 'bug'}<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>setTimeout(</span>()
=&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>player.hp</span> -= dmg; playSound('HIT'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleEffects.push({x: 150, y: 300, vx:0, <span class=GramE>vy:-</span>2,
life:60, type:'text', <span class=GramE>text:`</span>-${dmg}`, color:'#f44'}<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>battleShake = <span
class=GramE>10;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>player.hp</span> &lt;= 0) <span class=GramE>loseGame(</span>&quot;You
blacked out!&quot;<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else <span
class=GramE>{ battleState</span> = 'MENU'; battleMsg = &quot;What will PLAYER
do?&quot;; <span class=GramE>player.interactionCooldown</span> = 10<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}, 500<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>winGame(</span>) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Mark boss as
defeated in the map data (not just local reference)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(MAP_LAYOUTS['OFFICE'<span class=GramE>].boss</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>MAP_LAYOUTS['OFFICE'<span class=GramE>].boss</span>.active = <span
class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (activeBoss) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>activeBoss.active = <span class=GramE>false;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>currentState = <span
class=GramE>STATE.WIN;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>winTimer = 0; //
Reset timer<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>playMusic('WIN'<span
class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function loseGame(reason) <span class=GramE>{ currentState</span>
= STATE.GAMEOVER; battleMsg = reason; playMusic('NONE')<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>draw(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.clearRect</span>(0,
0, <span class=GramE>canvas.width</span>, <span class=GramE>canvas.height);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentState
=== STATE.TRANSITION) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawMapScreen();</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const p = 1 -
(transitionTimer / 90<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const
shutterHeight = (<span class=GramE>canvas.height</span> / 2) * <span
class=GramE>p;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#000<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillRect</span>(0, 0, <span class=GramE>canvas.width</span>,
shutterHeight<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillRect</span>(0, <span class=GramE>canvas.height</span> -
shutterHeight, <span class=GramE>canvas.width</span>, shutterHeight<span
class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(transitionTimer % 4 &lt; 2) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '<span class=GramE>rgba(</span>255, 255,
255, 0.5)<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillRect</span>(0, 0, <span class=GramE>canvas.width</span>, <span
class=GramE>canvas.height);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>return;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentState
=== STATE.BATTLE) <span class=GramE>{ drawBattle</span>(); return<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentState
=== STATE.WIN || currentState === STATE.GAMEOVER) <span class=GramE>{
drawEndScreen</span>(); return<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>drawMapScreen();</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>drawMapScreen(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= activeRoom.color || COLORS.<span class=GramE>floor;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillRect</span>(0,
0, <span class=GramE>canvas.width</span>, <span class=GramE>canvas.height);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>for (let y = 0; y
&lt; ROWS; y++) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>for (let x =
0; x &lt; COLS; x++) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const tile
= activeMap[y][x<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (tile
=== 1) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = COLORS.<span class=GramE>wall;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillRect</span>(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE,
TILE_SIZE<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.strokeStyle</span> = '#222<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.strokeRect</span>(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE,
TILE_SIZE<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if
(tile === 2) <span class=GramE>{ /</span>/ Door<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, 'door', x*TILE_SIZE, y*TILE_SIZE, TILE_SIZE,
true<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if
(tile === 3) <span class=GramE>{ /</span>/ Table<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, 'table', x*TILE_SIZE, y*TILE_SIZE,
TILE_SIZE, true<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if
(tile === 4) <span class=GramE>{ /</span>/ Chair<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, 'chair', x*TILE_SIZE, y*TILE_SIZE,
TILE_SIZE, true<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if
(tile === 5) <span class=GramE>{ /</span>/ Plant<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, 'plant', x*TILE_SIZE, y*TILE_SIZE,
TILE_SIZE, true<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if
(tile === 6) <span class=GramE>{ /</span>/ Altar/Counter (Using door sprite
tinted or just as is for now, or specialized if we add one)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>//
Reusing table for now or door if generic<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, 'table', x*TILE_SIZE, y*TILE_SIZE,
TILE_SIZE, true<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.textAlign</span>
= 'center<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Draw Crowd<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>activeCrowd.forEach(c =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, <span class=GramE>c.spriteKey</span>, <span
class=GramE>c.gridX</span> * TILE_SIZE, <span class=GramE>c.gridY</span> *
TILE_SIZE, TILE_SIZE, <span class=GramE>c.facingRight);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>});<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>activeMinions.forEach(m =&gt; { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if(<span
class=GramE>m.active</span>) <span class=GramE>drawSprite(</span>ctx, <span
class=GramE>m.spriteKey</span>, <span class=GramE>m.gridX</span> * TILE_SIZE, <span
class=GramE>m.gridY</span> * TILE_SIZE, TILE_SIZE, true<span class=GramE>);</span>
<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>});<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>activeNPCs.forEach(npc =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, <span class=GramE>npc.spriteKey</span>, <span
class=GramE>npc.gridX</span> * TILE_SIZE, <span class=GramE>npc.gridY</span> *
TILE_SIZE, TILE_SIZE, false<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Draw
exclamation mark if boss is defeated<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (npc.id ===
'grant_final' &amp;&amp; activeBoss &amp;<span class=GramE>&amp; !</span>activeBoss.active)
{<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, 'alert', <span class=GramE>npc.gridX</span>
* TILE_SIZE, (<span class=GramE>npc.gridY</span> - 1) * TILE_SIZE, TILE_SIZE,
false<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>});<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (activeBoss
&amp;&amp; activeBoss.active) { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, activeBoss.spriteKey, activeBoss.gridX *
TILE_SIZE, activeBoss.gridY * TILE_SIZE, 50, false<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>drawSprite(</span>ctx,
<span class=GramE>player.spriteKey</span>, player.x, <span class=GramE>player.y</span>,
TILE_SIZE, <span class=GramE>player.facingRight</span>, <span class=GramE>player.isMoving</span>
? <span class=GramE>player.bobFrame</span> : 0<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#fff'; <span class=GramE>ctx.textAlign</span> = 'left'; ctx.font = '12px
&quot;Press Start 2P&quot;<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillText</span>(`HP:
${<span class=GramE>player.hp</span>}`, 10, 20<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>drawBattle(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.save</span>(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleShake
&gt; 0) <span class=GramE>ctx.translate</span>((Math.random()-0.<span
class=GramE>5)*</span>battleShake, (Math.random()-0.<span class=GramE>5)*</span>battleShake<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Background<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#f8f8f8'; <span class=GramE>ctx.fillRect</span>(0,0,800,600); // Light BG<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#d0e0f0'; <span class=GramE>ctx.beginPath</span>(); <span class=GramE>ctx.moveTo</span>(0,600);
<span class=GramE>ctx.lineTo</span>(800,600); <span class=GramE>ctx.lineTo</span>(800,300);
<span class=GramE>ctx.lineTo</span>(0,450); <span class=GramE>ctx.fill</span>();
// Ground<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Platforms<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#c0c0c0<span class=GramE>';</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.beginPath</span>();
<span class=GramE>ctx.ellipse</span>(580, 200, 120, 40, 0, 0, Math.PI*2); <span
class=GramE>ctx.fill</span>(); // Enemy Base<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.beginPath</span>();
<span class=GramE>ctx.ellipse</span>(200, 450, 120, 40, 0, 0, Math.PI*2); <span
class=GramE>ctx.fill</span>(); // Player Base<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Sprites<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Player<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>drawSprite(</span>ctx,
<span class=GramE>player.spriteKey</span>, 140, 370, 128, true<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Enemy - Handle
Fainting Logic<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let enemyY = <span
class=GramE>120;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let enemyOpacity =
<span class=GramE>1.0;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleState
=== 'FAINT_ANIM' || battleState === 'VICTORY_WAIT') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>enemyY += <span
class=GramE>50;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>enemyOpacity =
<span class=GramE>0;</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>battleState !</span>== 'VICTORY_WAIT') { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(activeBattleEnemy.hp &gt; 0) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, activeBattleEnemy.spriteKey, 520, 120, 128,
false<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(activeBattleEnemy.hp &gt; 0) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawHealthBox(</span>50, 50, activeBattleEnemy.name,
activeBattleEnemy.lvl, activeBattleEnemy.hp, activeBattleEnemy.maxHp, false<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>drawHealthBox(</span>450,
350, &quot;PLAYER&quot;, 13, <span class=GramE>player.hp</span>, <span
class=GramE>player.maxHp</span>, true<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>battleEffects.forEach(p =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>p.type</span> === 'projectile') { <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (<span
class=GramE>p.spriteKey</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>//
Draw sprite projectile<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, <span class=GramE>p.spriteKey</span>, p.x,
p.y, 40, true<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>//
Draw icon projectile<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'>
</span>ctx.font='40px Arial<span class=GramE>';</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(<span class=GramE>p.icon</span>, p.x, p.y<span
class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else <span
class=GramE>{ ctx</span>.font='20px &quot;Press Start 2P&quot;'; <span
class=GramE>ctx.fillStyle=p.color</span>; <span class=GramE>ctx.fillText</span>(p.text,
p.x, p.y)<span class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>});<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// UI<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#222'; <span class=GramE>ctx.fillRect</span>(0, 480, 800, 120<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#fff'; <span class=GramE>ctx.lineWidth</span> = 4; <span class=GramE>ctx.strokeStyle</span>
= '#666'; <span class=GramE>ctx.strokeRect</span>(10, 490, 780, 100); <span
class=GramE>ctx.fillRect</span>(10, 490, 780, 100<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#000'; <span class=GramE>ctx.textAlign</span> = 'left'; ctx.font = '14px
&quot;Press Start 2P&quot;<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (battleState
=== 'MENU') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Dynamic
Left Box Text based on Selection<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let desc =
&quot;<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(battleMenuIdx === 0) desc = &quot;QUESTION: Answer JCQ quiz.<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else if
(battleMenuIdx === 1) desc = &quot;GEN-AI: Negative use (Risky)<span
class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>else if
(battleMenuIdx === 2) desc = &quot;RUN: Escape battle.<span class=GramE>&quot;;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#000<span class=GramE>';</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>wrapText(</span>ctx, desc, 35, 535, 350, 20); // Wrapped
description<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Menu Box<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#fff'; <span class=GramE>ctx.strokeStyle</span>
= '#000'; <span class=GramE>ctx.fillRect</span>(400, 490, 390, 100); <span
class=GramE>ctx.strokeRect</span>(400, 490, 390, 100<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#000<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Modified
Menu Options per Request<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// 0:
QUESTION, 1: GEN-AI, 2: RUN<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const opts =
[&quot;QUESTION&quot;, &quot;GEN-AI&quot;, &quot;RUN&quot;<span class=GramE>];</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>((battleMenuIdx===0?&quot;&gt;&quot;:&quot; <span
class=GramE>&quot;)+opts[</span>0], 420, 530<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>((battleMenuIdx===1?&quot;&gt;&quot;:&quot; <span
class=GramE>&quot;)+opts[</span>1], 620, 530<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>((battleMenuIdx===2?&quot;&gt;&quot;:&quot; <span
class=GramE>&quot;)+opts[</span>2], 420, 560<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else if
(battleState === 'QUESTION') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>ctx.font =
'12px &quot;Press Start 2P&quot;<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#000<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Use
wrapText for questions too!<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>wrapText(</span>ctx, currentQuestion.q, 30, 505, 740, 18<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>currentQuestion.options.forEach</span>((o, i) =&gt; {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = i === <span class=GramE>selectedOptionIdx ?</span>
'#d00<span class=GramE>' :</span> '#000<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Ensure
options don't clip if wrapping <span class=GramE>pushes</span> them down
(simplified vertical stack)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>let yPos =
545 + (i*20<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>((i===selectedOptionIdx?&quot;&gt; &quot;:<span
class=GramE>&quot;<span style='mso-spacerun:yes'> </span>&quot;</span>)+o, 30,
yPos<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>});<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#000<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>wrapText(</span>ctx, battleMsg, 35, 535, 740, 20<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if
(battleState === 'VICTORY_WAIT') {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#d00<span class=GramE>';</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;[PRESS SPACE TO CONTINUE]&quot;, 450, 570<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.restore</span>(<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>drawHealthBox(</span>x, y, name,
lvl, hp, maxHp, showNumbers) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Box Body<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#fff'; <span class=GramE>ctx.strokeStyle</span>='#000'; <span class=GramE>ctx.lineWidth</span>=<span
class=GramE>3;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillRect</span>(x,
y, 300, 80); <span class=GramE>ctx.strokeRect</span>(x, y, 300, 80<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Text<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#000'; ctx.font = '14px &quot;Press Start 2P&quot;'; <span class=GramE>ctx.textAlign</span>
= 'left<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillText</span>(name,
x + 10, y + 30<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillText</span>(&quot;Lv&quot;
+ lvl, x + 220, y + 30<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// HP Bar<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#555'; <span class=GramE>ctx.fillRect</span>(x + 60, y + 45, 200, 15); //
Back<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>const pct = <span
class=GramE>Math.max(</span>0, hp / maxHp<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= pct &gt; <span class=GramE>0.5 ?</span> '#4f4<span class=GramE>' :</span>
(pct &gt; <span class=GramE>0.2 ?</span> '#fd0<span class=GramE>' :</span>
'#f44'<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillRect</span>(x
+ 60, y + 45, 200 * pct, 15); // Front<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= '#000'; ctx.font = '10px &quot;Press Start 2P&quot;'; <span class=GramE>ctx.fillText</span>(&quot;HP&quot;,
x + 30, y + 57<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (showNumbers) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(`${Math.floor(hp)}/ ${maxHp}`, x + 150, y + 70<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>drawEndScreen(</span>) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.fillStyle</span>
= currentState === <span class=GramE>STATE.WIN ?</span> '#000<span class=GramE>'
:</span> '#200'; <span class=GramE>ctx.fillRect</span>(0,0,800,600<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span class=GramE>ctx.textAlign</span>
= 'center<span class=GramE>';</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (currentState
=== STATE.WIN) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>ctx.font =
'30px &quot;Press Start 2P&quot;<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#44ff44<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;INTEGRITY RESTORED!&quot;, 400, 60<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>ctx.font =
'14px &quot;Press Start 2P&quot;<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#ffffff<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;Great job! You have purged the
glitches.&quot;, 400, 110<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#f0db4f<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;REMEMBER THE AI CODE:&quot;, 400, 160<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.textAlign</span> = 'left<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#ffffff<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;1. AUTHENTICITY: Your work must be your
own.&quot;, 80, 210<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;2. TRANSPARENCY: Reference AI tools
used.&quot;, 80, 250<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;3. VERIFICATION: Check AI facts.&quot;,
80, 290<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;4. CONSEQUENCES: Misuse =
Disqualification.&quot;, 80, 330<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.textAlign</span> = 'center<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#cccccc<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;Use AI as a tool, not a
replacement.&quot;, 400, 380<span class=GramE>);</span> <o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#ffffff<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;Press SPACE to Restart&quot;, 400, 560<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Mr Clinton
Pop-up (10 seconds = 600 frames at 60fps)<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>if (winTimer
&gt; 600) {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Draw
Box<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#333<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.strokeStyle</span> = '#fff<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.lineWidth</span> = <span class=GramE>4;</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillRect</span>(150, 420, 500, 100<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.strokeRect</span>(150, 420, 500, 100<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Draw
Clinton<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>drawSprite(</span>ctx, 'clinton', 170, 440, 60, false<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>// Draw
Text<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#fff<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.textAlign</span> = 'left<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>ctx.font =
'12px &quot;Press Start 2P&quot;<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;Mr Clinton:&quot;, 250, 450<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>wrapText(</span>ctx, &quot;\&quot;You did a really really brilliant
<span class=GramE>job!\</span>&quot;&quot;, 250, 480, 380, 20<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>} else {<o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#f44<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>ctx.font =
'30px &quot;Press Start 2P&quot;<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;GAME OVER&quot;, 400, 250<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillStyle</span> = '#fff'; ctx.font = '14px &quot;Press Start
2P&quot;<span class=GramE>';</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(battleMsg, 400, 320<span class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span><span
class=GramE>ctx.fillText</span>(&quot;Press SPACE to restart.&quot;, 400, 450<span
class=GramE>);</span><o:p></o:p></p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span>}<o:p></o:p></p>

<p class=MsoNormal>}<o:p></o:p></p>

<p class=MsoNormal><span class=GramE>window.addEventListener</span>('keydown',
e =&gt; <span class=GramE>{ if</span> ((currentState === STATE.WIN ||
currentState === STATE.GAMEOVER) &amp;&amp; e.key === &quot; &quot;) <span
class=GramE>location.reload</span>()<span class=GramE>; });</span><o:p></o:p></p>

<p class=MsoNormal>function <span class=GramE>loop(</span>) <span class=GramE>{
update</span>(); <span class=GramE>draw(</span>); requestAnimationFrame(loop)<span
class=GramE>; }</span><o:p></o:p></p>

<p class=MsoNormal><span class=GramE>loop();</span><o:p></o:p></p>

<p class=MsoNormal>&lt;/script&gt;<o:p></o:p></p>

<p class=MsoNormal>&lt;/body&gt;<o:p></o:p></p>

<p class=MsoNormal>&lt;/html&gt;</p>

</div>

</body>

</html>
